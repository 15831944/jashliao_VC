<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DSACSS Operational Code: Message.cpp Source File</title>
<link href="doxygen.css" tppabs="http://dsacss.sourceforge.net/doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<h1>Message.cpp</h1><a href="Message_8cpp.html" tppabs="http://dsacss.sourceforge.net/Message_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 
00008 <span class="comment">/*  </span>
00009 <span class="comment">*/</span>
00011 
00012 <span class="preprocessor">#include "<a class="code" href="Message_8h.html" tppabs="http://dsacss.sourceforge.net/Message_8h.html">Message.h</a>"</span>
00013 <span class="preprocessor">#include &lt;sstream&gt;</span>
00014 <span class="preprocessor">#include &lt;iostream&gt;</span>
00015 
<a name="l00016"></a><a class="code" href="classMessage.html#Messagea4" tppabs="http://dsacss.sourceforge.net/classMessage.html#Messagea4">00016</a> string <a class="code" href="classMessage.html#Messagea4" tppabs="http://dsacss.sourceforge.net/classMessage.html#Messagea4">Message::Serialize</a>()<span class="keyword"> const</span>
00017 <span class="keyword"></span>{
00018     stringstream outMsgStream;
00019     string outMsg;
00020     outMsgStream &lt;&lt; <a class="code" href="classMessage.html#Messagep0" tppabs="http://dsacss.sourceforge.net/classMessage.html#Messagep0">m_Destination</a>;
00021     outMsgStream &lt;&lt; <span class="stringliteral">":"</span>;
00022     outMsgStream &lt;&lt; <a class="code" href="classMessage.html#Messagep1" tppabs="http://dsacss.sourceforge.net/classMessage.html#Messagep1">m_Sender</a>;
00023     outMsgStream &lt;&lt; <span class="stringliteral">"_["</span>;
00024     outMsgStream &lt;&lt; <a class="code" href="classMessage.html#Messagep2" tppabs="http://dsacss.sourceforge.net/classMessage.html#Messagep2">m_Command</a>;
00025     outMsgStream &lt;&lt; <span class="stringliteral">":"</span>;
00026     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ii = 0; ii &lt; <a class="code" href="classMessage.html#Messagep3" tppabs="http://dsacss.sourceforge.net/classMessage.html#Messagep3">m_Parameters</a>.size(); ++ii)
00027     {
00028         outMsgStream &lt;&lt; <a class="code" href="classMessage.html#Messagep3" tppabs="http://dsacss.sourceforge.net/classMessage.html#Messagep3">m_Parameters</a>[ii];
00029         <span class="keywordflow">if</span>(ii != m_Parameters.size()-1)
00030             outMsgStream &lt;&lt; <span class="stringliteral">","</span>;
00031     }
00032     outMsgStream &lt;&lt; <span class="stringliteral">"]"</span>;
00033     outMsgStream &gt;&gt; outMsg;
00034     <span class="keywordflow">return</span> outMsg;  
00035 }
00036 
<a name="l00037"></a><a class="code" href="classMessage.html#Messagea3" tppabs="http://dsacss.sourceforge.net/classMessage.html#Messagea3">00037</a> <span class="keywordtype">void</span> <a class="code" href="classMessage.html#Messagea3" tppabs="http://dsacss.sourceforge.net/classMessage.html#Messagea3">Message::Parse</a>(string _incomingMsg)
00038 {
00039     <span class="keywordtype">int</span> finder = 0; 
00040     <span class="keywordtype">int</span> efinder = 0;
00041     <span class="keywordtype">int</span> finderLength;
00042     stringstream inMsgStream;
00043     efinder = _incomingMsg.find(<span class="charliteral">':'</span>,finder);
00044     finderLength = efinder - finder;                                    <span class="comment">// "how long is it?"</span>
00045     <a class="code" href="classMessage.html#Messagep0" tppabs="http://dsacss.sourceforge.net/classMessage.html#Messagep0">m_Destination</a> = _incomingMsg.substr(finder, finderLength);
00046     
00047     finder = efinder + 1;
00048     efinder = _incomingMsg.find(<span class="charliteral">'_'</span>,finder);
00049     finderLength = efinder - finder;                                    <span class="comment">// "how long is it?"</span>
00050     <a class="code" href="classMessage.html#Messagep1" tppabs="http://dsacss.sourceforge.net/classMessage.html#Messagep1">m_Sender</a> = _incomingMsg.substr(finder, finderLength);
00051     
00052     finder = efinder + 2;
00053     efinder = _incomingMsg.find(<span class="charliteral">':'</span>,finder);
00054     finderLength = efinder - finder;                                    <span class="comment">// "how long is it?"</span>
00055     <a class="code" href="classMessage.html#Messagep2" tppabs="http://dsacss.sourceforge.net/classMessage.html#Messagep2">m_Command</a> = _incomingMsg.substr(finder, finderLength);
00056     
00057     <span class="keywordflow">while</span>(1)
00058     {
00059         finder = efinder + 1;
00060         efinder = _incomingMsg.find(<span class="charliteral">','</span>,finder);
00061         finderLength = efinder - finder;                                        <span class="comment">// "how long is it?"</span>
00062         <a class="code" href="classMessage.html#Messagep3" tppabs="http://dsacss.sourceforge.net/classMessage.html#Messagep3">m_Parameters</a>.push_back(atoi((_incomingMsg.substr(finder, finderLength)).c_str()));
00063         
00064         <span class="keywordflow">if</span>(efinder &lt; 0)
00065             <span class="keywordflow">return</span>;
00066     }    
00067     <span class="keywordflow">return</span>;        
00068 }
00069 <span class="comment">// Do not change the comments below - they will be added automatically by CVS</span>
00070 <span class="comment">/*****************************************************************************</span>
00071 <span class="comment">*       $Log: Message.cpp,v $</span>
00072 <span class="comment">*       Revision 1.3  2003/11/01 21:00:13  rsharo</span>
00073 <span class="comment">*       changed "Time.h" includes to "utils/Time.h" includes. Also eliminated excess compile warnings.</span>
00074 <span class="comment">*       </span>
00075 <span class="comment">*       Revision 1.2  2003/06/13 15:34:30  nicmcp</span>
00076 <span class="comment">*       Changed the function name GetMessage() to Serialize() to match the Message.h file</span>
00077 <span class="comment">*       </span>
00078 <span class="comment">*       Revision 1.1.1.1  2003/06/06 18:44:15  simpliciter</span>
00079 <span class="comment">*       Initial submission.</span>
00080 <span class="comment">*       </span>
00081 <span class="comment">*</span>
00082 <span class="comment">******************************************************************************/</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jun 15 11:49:54 2004 for DSACSS Operational Code by
<a href="javascript:if(confirm('http://www.doxygen.org/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.doxygen.org/index.html'" tppabs="http://www.doxygen.org/index.html">
<img src="doxygen.png" tppabs="http://dsacss.sourceforge.net/doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
