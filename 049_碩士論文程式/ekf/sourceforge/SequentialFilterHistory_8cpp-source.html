<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DSACSS Operational Code: SequentialFilterHistory.cpp Source File</title>
<link href="doxygen.css" tppabs="http://dsacss.sourceforge.net/doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<h1>SequentialFilterHistory.cpp</h1><a href="SequentialFilterHistory_8cpp.html" tppabs="http://dsacss.sourceforge.net/SequentialFilterHistory_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 
00008 <span class="comment">/*  </span>
00009 <span class="comment"> */</span>
00011 
00012 <span class="preprocessor">#include "<a class="code" href="SequentialFilterHistory_8h.html" tppabs="http://dsacss.sourceforge.net/SequentialFilterHistory_8h.html">SequentialFilterHistory.h</a>"</span>
00013     
00014 
<a name="l00017"></a><a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryb0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryb0">00017</a> <span class="keywordtype">void</span> <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryb0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryb0">SequentialFilterHistory::InitializeSequentialFilterHistory</a>(<a class="code" href="classSequentialFilter.html" tppabs="http://dsacss.sourceforge.net/classSequentialFilter.html">SequentialFilter</a>* _ptr_filter)
00018 {
00019         <span class="comment">// clean start</span>
00020         <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistorya3" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistorya3">ResetHistory</a>();
00021         
00022         <span class="comment">// store that protected data member!</span>
00023         <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryp0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryp0">m_ptr_filter</a> = _ptr_filter;
00024         
00025         <span class="comment">// allocate space for the vector containers</span>
00026         <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryr0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryr0">m_sfStateHistory</a>.reserve(HISTORY_RESERVE_SIZE);
00027         <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryr1" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryr1">m_sfControlHistory</a>.reserve(HISTORY_RESERVE_SIZE);
00028         <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryr2" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryr2">m_sfMeasurementHistory</a>.reserve(HISTORY_RESERVE_SIZE);
00029         <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryr3" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryr3">m_sfParameterHistory</a>.reserve(HISTORY_RESERVE_SIZE);
00030 };
00031 
00032 
00033 
<a name="l00042"></a><a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistorya1" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistorya1">00042</a> <span class="keywordtype">void</span> <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistorya1" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistorya1">SequentialFilterHistory::AppendHistory</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>&amp; _appendTime)
00043 {
00044     <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistorya1" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistorya1">AppendHistory</a>(ssfTime(_appendTime));
00045 }    
00046     
00047 
00048 
<a name="l00057"></a><a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistorya2" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistorya2">00057</a> <span class="keywordtype">void</span> <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistorya1" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistorya1">SequentialFilterHistory::AppendHistory</a>(<span class="keyword">const</span> ssfTime&amp; _appendTime)
00058 {
00059         <span class="comment">// time stuff</span>
00060         History::AppendHistory(_appendTime);
00061         
00062         <span class="comment">// the four vectors</span>
00063         <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryr0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryr0">m_sfStateHistory</a>.push_back( <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryp0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryp0">m_ptr_filter</a>-&gt;<a class="code" href="classSequentialFilter.html#SequentialFiltera10" tppabs="http://dsacss.sourceforge.net/classSequentialFilter.html#SequentialFiltera10">GetStateVector</a>() );
00064         <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryr1" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryr1">m_sfControlHistory</a>.push_back( <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryp0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryp0">m_ptr_filter</a>-&gt;<a class="code" href="classSequentialFilter.html#SequentialFiltera11" tppabs="http://dsacss.sourceforge.net/classSequentialFilter.html#SequentialFiltera11">GetControlVector</a>() );
00065         <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryr2" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryr2">m_sfMeasurementHistory</a>.push_back( <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryp0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryp0">m_ptr_filter</a>-&gt;<a class="code" href="classSequentialFilter.html#SequentialFiltera12" tppabs="http://dsacss.sourceforge.net/classSequentialFilter.html#SequentialFiltera12">GetMeasurementVector</a>() );
00066         <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryr3" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryr3">m_sfParameterHistory</a>.push_back( <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryp0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryp0">m_ptr_filter</a>-&gt;<a class="code" href="classSequentialFilter.html#SequentialFiltera13" tppabs="http://dsacss.sourceforge.net/classSequentialFilter.html#SequentialFiltera13">GetParameterVector</a>() );
00067         
00068         <span class="keywordflow">return</span>;
00069 }
00070 
00071 
00072 
<a name="l00074"></a><a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistorya3" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistorya3">00074</a> <span class="keywordtype">void</span> <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistorya3" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistorya3">SequentialFilterHistory::ResetHistory</a>() { }
00075 
00076 
00077 
<a name="l00081"></a><a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistorya4" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistorya4">00081</a> Matrix <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistorya4" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistorya4">SequentialFilterHistory::GetHistory</a>()
00082 {
00083         <span class="comment">// initialize the output matrix based on the size of the desired output state, </span>
00084         <span class="comment">// and an element for time. The number of rows is equal to the number of time elements.</span>
00085         <span class="keywordtype">int</span> StateVectorSize = <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryp0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryp0">m_ptr_filter</a>-&gt;<a class="code" href="classSequentialFilter.html#SequentialFiltera10" tppabs="http://dsacss.sourceforge.net/classSequentialFilter.html#SequentialFiltera10">GetStateVector</a>().getIndexBound();
00086         <span class="keywordtype">int</span> ControlVectorSize = <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryp0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryp0">m_ptr_filter</a>-&gt;<a class="code" href="classSequentialFilter.html#SequentialFiltera11" tppabs="http://dsacss.sourceforge.net/classSequentialFilter.html#SequentialFiltera11">GetControlVector</a>().getIndexBound();
00087         <span class="keywordtype">int</span> MeasurementVectorSize = <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryp0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryp0">m_ptr_filter</a>-&gt;<a class="code" href="classSequentialFilter.html#SequentialFiltera12" tppabs="http://dsacss.sourceforge.net/classSequentialFilter.html#SequentialFiltera12">GetMeasurementVector</a>().getIndexBound();
00088         <span class="keywordtype">int</span> ParameterVectorSize = <a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryp0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryp0">m_ptr_filter</a>-&gt;<a class="code" href="classSequentialFilter.html#SequentialFiltera13" tppabs="http://dsacss.sourceforge.net/classSequentialFilter.html#SequentialFiltera13">GetParameterVector</a>().getIndexBound();
00089         
00090         Matrix returnMatrix(m_TimeHistory.size(), 1 + StateVectorSize + ControlVectorSize + MeasurementVectorSize + ParameterVectorSize);
00091     
00092         <span class="comment">// and stick it in the matrx!   </span>
00093         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ii = 0; ii &lt; m_TimeHistory.size(); ii++)
00094                 {
00095                 returnMatrix(MatrixIndexBase + ii, MatrixIndexBase) = m_TimeHistory[ii].GetSeconds();
00096                 returnMatrix(MatrixIndexBase + ii, _(MatrixIndexBase + 1, MatrixIndexBase + StateVectorSize)) = ~<a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryr0" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryr0">m_sfStateHistory</a>[ii];
00097                 returnMatrix(MatrixIndexBase + ii, _(MatrixIndexBase + 1 + StateVectorSize, MatrixIndexBase + StateVectorSize + ControlVectorSize)) = ~<a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryr1" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryr1">m_sfControlHistory</a>[ii];
00098                 returnMatrix(MatrixIndexBase + ii, _(MatrixIndexBase + 1 + StateVectorSize + ControlVectorSize, MatrixIndexBase + StateVectorSize + ControlVectorSize + MeasurementVectorSize)) = ~<a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryr2" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryr2">m_sfMeasurementHistory</a>[ii];
00099                 returnMatrix(MatrixIndexBase + ii, _(MatrixIndexBase + 1 + StateVectorSize + ControlVectorSize + MeasurementVectorSize, MatrixIndexBase + StateVectorSize + ControlVectorSize + MeasurementVectorSize + ParameterVectorSize)) = ~<a class="code" href="classSequentialFilterHistory.html#SequentialFilterHistoryr3" tppabs="http://dsacss.sourceforge.net/classSequentialFilterHistory.html#SequentialFilterHistoryr3">m_sfParameterHistory</a>[ii];
00100                 }
00101         
00102         <span class="keywordflow">return</span> returnMatrix;
00103 }
00104 
00105 
00106 <span class="comment">// Do not change the comments below - they will be added automatically by CVS</span>
00107 <span class="comment">/*****************************************************************************</span>
00108 <span class="comment">*       $Log: SequentialFilterHistory.cpp,v $</span>
00109 <span class="comment">*       Revision 1.4  2003/11/01 21:00:15  rsharo</span>
00110 <span class="comment">*       changed "Time.h" includes to "utils/Time.h" includes. Also eliminated excess compile warnings.</span>
00111 <span class="comment">*       </span>
00112 <span class="comment">*       Revision 1.3  2003/06/28 00:45:37  simpliciter</span>
00113 <span class="comment">*       Basic housekeeping.</span>
00114 <span class="comment">*       </span>
00115 <span class="comment">*       Revision 1.2  2003/06/27 01:53:56  simpliciter</span>
00116 <span class="comment">*       Fully commented and fully functional!</span>
00117 <span class="comment">*       GetState not implemented because it would require / desire</span>
00118 <span class="comment">*       iterpolations, which seems not in the spirit of logging the</span>
00119 <span class="comment">*       performance of a filter.</span>
00120 <span class="comment">*       </span>
00121 <span class="comment">*       Revision 1.1  2003/06/24 15:50:06  simpliciter</span>
00122 <span class="comment">*       Everything but the all important "GetHistory" command</span>
00123 <span class="comment">*       should work.  :)</span>
00124 <span class="comment">*       </span>
00125 <span class="comment">*       Revision 1.0  2003/06/06 18:44:15  simpliciter</span>
00126 <span class="comment">*       Initial submission.</span>
00127 <span class="comment">*       </span>
00128 <span class="comment">*</span>
00129 <span class="comment">******************************************************************************/</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jun 15 11:49:55 2004 for DSACSS Operational Code by
<a href="javascript:if(confirm('http://www.doxygen.org/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.doxygen.org/index.html'" tppabs="http://www.doxygen.org/index.html">
<img src="doxygen.png" tppabs="http://dsacss.sourceforge.net/doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
