<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DSACSS Operational Code: SystemProperties.cpp Source File</title>
<link href="doxygen.css" tppabs="http://dsacss.sourceforge.net/doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<h1>SystemProperties.cpp</h1><a href="SystemProperties_8cpp.html" tppabs="http://dsacss.sourceforge.net/SystemProperties_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 
00008 
00009 <span class="preprocessor">#include "<a class="code" href="SystemProperties_8h.html" tppabs="http://dsacss.sourceforge.net/SystemProperties_8h.html">Utils/SystemProperties.h</a>"</span>
00010 
00011 <span class="preprocessor">#include "ace/Configuration_Import_Export.h"</span>
00012 
00013 <span class="preprocessor">#include &lt;string.h&gt;</span>
00014 
00015 <span class="preprocessor">#include &lt;sstream&gt;</span>
00016 <span class="preprocessor">#include &lt;algorithm&gt;</span>
00017 
00018 
<a name="l00019"></a><a class="code" href="SystemProperties_8cpp.html#a0" tppabs="http://dsacss.sourceforge.net/SystemProperties_8cpp.html#a0">00019</a> <a class="code" href="classSystemProperties.html" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html">SystemProperties</a> * <a class="code" href="SystemProperties_8cpp.html#a0" tppabs="http://dsacss.sourceforge.net/SystemProperties_8cpp.html#a0">s_pInstance</a> = NULL;
00020 
00021 
<a name="l00022"></a><a class="code" href="classSystemProperties.html#SystemPropertiese0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiese0">00022</a> <a class="code" href="classSystemProperties.html" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html">SystemProperties</a> *<a class="code" href="classSystemProperties.html#SystemPropertiese0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiese0">SystemProperties::Instance</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *configFilename,
00023                                                                                          <span class="keywordtype">bool</span> registryFormat)
00024 {
00025         <span class="keywordflow">if</span> (<a class="code" href="SystemProperties_8cpp.html#a0" tppabs="http://dsacss.sourceforge.net/SystemProperties_8cpp.html#a0">s_pInstance</a> == NULL)
00026         {
00027                 <a class="code" href="SystemProperties_8cpp.html#a0" tppabs="http://dsacss.sourceforge.net/SystemProperties_8cpp.html#a0">s_pInstance</a> = <span class="keyword">new</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa0">SystemProperties</a>();
00028 
00029                 <span class="keywordflow">if</span> (registryFormat)
00030                 {
00031                         <a class="code" href="SystemProperties_8cpp.html#a0" tppabs="http://dsacss.sourceforge.net/SystemProperties_8cpp.html#a0">s_pInstance</a>-&gt;<a class="code" href="classSystemProperties.html#SystemPropertiesa28" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa28">ImportPropertiesRegistry</a>(configFilename);
00032                 }
00033                 <span class="keywordflow">else</span>
00034                 {
00035                         <a class="code" href="SystemProperties_8cpp.html#a0" tppabs="http://dsacss.sourceforge.net/SystemProperties_8cpp.html#a0">s_pInstance</a>-&gt;<a class="code" href="classSystemProperties.html#SystemPropertiesa30" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa30">ImportPropertiesIni</a>(configFilename);
00036                 }
00037         }
00038 
00039         <span class="keywordflow">return</span> <a class="code" href="SystemProperties_8cpp.html#a0" tppabs="http://dsacss.sourceforge.net/SystemProperties_8cpp.html#a0">s_pInstance</a>;
00040 }
00041 
00042 
00043 
<a name="l00044"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa0">00044</a> <a class="code" href="classSystemProperties.html#SystemPropertiesa0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa0">SystemProperties::SystemProperties</a>()
00045 {
00046         this-&gt;open();
00047 }
00048 
00049 
00050 
<a name="l00051"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa2" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa2">00051</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa2" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa2">SystemProperties::GetStringEntry</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *sectionName, <span class="keyword">const</span> <span class="keywordtype">char</span> *name,
00052                                                                          std::string &amp;value)
00053 {
00054         <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> current;
00055         <span class="keywordtype">int</span> retVal = <a class="code" href="classSystemProperties.html#SystemPropertiesa22" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa22">GetSectionKey</a>(sectionName, current);
00056 
00057         <span class="keywordflow">if</span> (retVal)
00058                 ACE_ERROR_RETURN((LM_ERROR,
00059                         <span class="stringliteral">"(%N:%l) Failed to find system property section: %s\n"</span>,
00060                         sectionName), retVal);
00061 
00062         <span class="keywordflow">return</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa2" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa2">GetStringEntry</a>(current, name, value);
00063 }
00064 
00065 
<a name="l00066"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa3" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa3">00066</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa3" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa3">SystemProperties::GetIntegerEntry</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *sectionName,
00067                                                                           <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;value)
00068 {
00069         <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> current;
00070         <span class="keywordtype">int</span> retVal = <a class="code" href="classSystemProperties.html#SystemPropertiesa22" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa22">GetSectionKey</a>(sectionName, current);
00071 
00072         <span class="keywordflow">if</span> (retVal)
00073                 ACE_ERROR_RETURN((LM_ERROR,
00074                         <span class="stringliteral">"(%N:%l) Failed to find system property section: %s\n"</span>,
00075                         sectionName), retVal);
00076 
00077         <span class="keywordflow">return</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa3" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa3">GetIntegerEntry</a>(current, name, value);
00078 }
00079 
00080 
<a name="l00081"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa4" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa4">00081</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa4" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa4">SystemProperties::GetDoubleEntry</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *sectionName,
00082                                                                          <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">double</span> &amp;value)
00083 {
00084         <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> current;
00085         <span class="keywordtype">int</span> retVal = <a class="code" href="classSystemProperties.html#SystemPropertiesa22" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa22">GetSectionKey</a>(sectionName, current);
00086 
00087         <span class="keywordflow">if</span> (retVal)
00088                 ACE_ERROR_RETURN((LM_ERROR,
00089                         <span class="stringliteral">"(%N:%l) Failed to find system property section: %s\n"</span>,
00090                         sectionName), retVal);
00091 
00092         <span class="keywordflow">return</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa4" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa4">GetDoubleEntry</a>(current, name, value);
00093 }
00094 
00095 
<a name="l00096"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa5" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa5">00096</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa5" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa5">SystemProperties::GetBinaryEntry</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *sectionName, <span class="keyword">const</span> <span class="keywordtype">char</span> *name,
00097                                                                          <span class="keywordtype">void</span> * &amp;value, size_t &amp;length)
00098 {
00099         <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> current;
00100         <span class="keywordtype">int</span> retVal = <a class="code" href="classSystemProperties.html#SystemPropertiesa22" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa22">GetSectionKey</a>(sectionName, current);
00101 
00102         <span class="keywordflow">if</span> (retVal)
00103                 ACE_ERROR_RETURN((LM_ERROR,
00104                         <span class="stringliteral">"(%N:%l) Failed to find system property section: %s\n"</span>,
00105                         sectionName), retVal);
00106 
00107         <span class="keywordflow">return</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa5" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa5">GetBinaryEntry</a>(current, name, value, length);
00108 
00109 }
00110 
00111 
00112 
<a name="l00113"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa6" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa6">00113</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa6" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa6">SystemProperties::GetBooleanEntry</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *sectionName,
00114                                                                           <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">bool</span> &amp;value)
00115 {
00116         <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> current;
00117         <span class="keywordtype">int</span> retVal = <a class="code" href="classSystemProperties.html#SystemPropertiesa22" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa22">GetSectionKey</a>(sectionName, current);
00118 
00119         <span class="keywordflow">if</span> (retVal)
00120                 ACE_ERROR_RETURN((LM_ERROR,
00121                         <span class="stringliteral">"(%N:%l) Failed to find system property section: %s\n"</span>,
00122                         sectionName), retVal);
00123 
00124         <span class="keywordflow">return</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa6" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa6">GetBooleanEntry</a>(current, name, value);
00125 }
00126 
00127 
00128 
00129 
<a name="l00130"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa7" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa7">00130</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa2" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa2">SystemProperties::GetStringEntry</a>(<span class="keyword">const</span> <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;parent,
00131                                                                          <span class="keyword">const</span> <span class="keywordtype">char</span> *name, std::string &amp;value)
00132 {
00133         ACE_TString tstring;
00134 
00135         <span class="keywordtype">int</span> retVal = this-&gt;get_string_value(parent, name, tstring);
00136 
00137         <span class="keywordflow">if</span> (retVal)
00138                 ACE_ERROR_RETURN((LM_ERROR,
00139                         <span class="stringliteral">"(%N:%l) Failed to get system property: %s\n"</span>, name), retVal);
00140 
00141         value = tstring.c_str();
00142         <span class="keywordflow">return</span> 0;
00143 }
00144 
00145 
<a name="l00146"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa8" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa8">00146</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa3" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa3">SystemProperties::GetIntegerEntry</a>(<span class="keyword">const</span> <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;parent,
00147                                                                           <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;value)
00148 {
00149         <span class="keywordtype">int</span> retVal = this-&gt;get_integer_value(parent, name, value);
00150 
00151         <span class="comment">//</span>
00152         <span class="comment">// If the property isn't stored as an integer, it might be encoded as a</span>
00153         <span class="comment">// string. This would be the case if the properties were read from an</span>
00154         <span class="comment">// INI-style file.</span>
00155         <span class="keywordflow">if</span> (retVal)
00156         {
00157                 ACE_TString tstring;
00158                 retVal = this-&gt;get_string_value(parent, name, tstring);
00159                 
00160                 <span class="keywordflow">if</span> (retVal)
00161                         ACE_ERROR_RETURN((LM_ERROR,
00162                         <span class="stringliteral">"(%N:%l) Failed to get system property: %s\n"</span>, name), retVal);
00163                 
00164                 <span class="keyword">const</span> <span class="keywordtype">char</span> * buf=tstring.c_str();
00165                 <span class="keywordtype">char</span> * endptr;
00166                 value = strtol(buf, &amp;endptr, 0);
00167                 <span class="keywordflow">if</span> ((buf + tstring.length()) != endptr)
00168                 {
00169                         ACE_ERROR_RETURN((LM_ERROR,
00170                                 <span class="stringliteral">"(%N:%l) System property '%s' did not convert to an integer correctly.\n"</span>,
00171                                 name), retVal);
00172                 }
00173         }
00174 
00175         <span class="keywordflow">if</span> (retVal)
00176                 ACE_ERROR_RETURN((LM_ERROR,
00177                         <span class="stringliteral">"(%N:%l) Failed to get system property: %s\n"</span>, name), retVal);
00178 
00179         <span class="keywordflow">return</span> 0;
00180 }
00181 
00182 
<a name="l00183"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa9" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa9">00183</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa4" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa4">SystemProperties::GetDoubleEntry</a>(<span class="keyword">const</span> <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;parent,
00184                                                                          <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">double</span> &amp;value)
00185 {
00186         ACE_TString tstring;
00187         <span class="keywordtype">int</span> retVal = this-&gt;get_string_value(parent, name, tstring);
00188 
00189         <span class="keywordflow">if</span> (retVal)
00190                 ACE_ERROR_RETURN((LM_ERROR,
00191                         <span class="stringliteral">"(%N:%l) Failed to get system property: %s\n"</span>, name), retVal);
00192 
00193         <span class="keyword">const</span> <span class="keywordtype">char</span> * buf=tstring.c_str();
00194         <span class="keywordtype">char</span> * endptr;
00195         value = strtod(buf, &amp;endptr);
00196         <span class="keywordflow">if</span> ((buf + tstring.length()) != endptr)
00197         {
00198                 ACE_ERROR_RETURN((LM_ERROR,
00199                         <span class="stringliteral">"(%N:%l) System property '%s' did not convert to a double correctly.\n"</span>,
00200                         name), retVal);
00201         }
00202 
00203         <span class="keywordflow">return</span> 0;
00204 }
00205 
00206 
<a name="l00207"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa10" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa10">00207</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa5" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa5">SystemProperties::GetBinaryEntry</a>(<span class="keyword">const</span> <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;parent,
00208                                                                          <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">void</span> * &amp;value,
00209                                                                          size_t &amp;length)
00210 {
00211         <span class="comment">//</span>
00212         <span class="comment">// Try to get the binary value directly from the properties.</span>
00213         <span class="keywordtype">int</span> retVal = this-&gt;get_binary_value(parent, name, value, length);
00214 
00215         <span class="comment">//</span>
00216         <span class="comment">// If the property isn't stored as a binary, it might be encoded as a</span>
00217         <span class="comment">// string. This would be the case if the properties were read from an</span>
00218         <span class="comment">// INI-style file.</span>
00219         <span class="keywordflow">if</span> (retVal == -1)
00220         {
00221                 ACE_TString tstring;
00222                 retVal = this-&gt;get_string_value(parent, name, tstring);
00223 
00224                 <span class="keywordflow">if</span> (retVal == 0)
00225                 {
00226                         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> slen = tstring.length();
00227 
00228                         <span class="comment">//</span>
00229                         <span class="comment">// If we have a zero-length binary field, its perfectly valid.</span>
00230                         <span class="comment">// Just report a length of zero.</span>
00231                         <span class="keywordflow">if</span> (slen == 0)
00232                         {
00233                                 value = NULL;
00234                                 length = 0;
00235                         }
00236                         <span class="comment">//</span>
00237                         <span class="comment">// Else, check to see if we have a valid number of characters.</span>
00238                         <span class="comment">// There are two hex digits per byte and one more byte chan commas.</span>
00239                         <span class="comment">// In other words, 2 chars for the first byte and 3 for every</span>
00240                         <span class="comment">// subsequent one.  For example: "0a,0b,0c,0d"</span>
00241                         <span class="keywordflow">else</span>
00242                         {
00243                                 <span class="comment">//</span>
00244                                 <span class="comment">// This is where we will be holding the parsed bytes.</span>
00245                                 std::vector&lt;u_char&gt; data;
00246 
00247                                 <span class="comment">//</span>
00248                                 <span class="comment">// Get a pointer to the string.</span>
00249                                 <span class="keyword">const</span> <span class="keywordtype">char</span> *idx = tstring.c_str();
00250 
00251                                 <span class="comment">//</span>
00252                                 <span class="comment">// This pointer is used to find the commas between bytes.</span>
00253                                 <span class="keywordtype">char</span> *end;
00254 
00255                                 <span class="comment">//</span>
00256                                 <span class="comment">// Cut off any leading whitespace.</span>
00257                                 idx += strspn(idx, <span class="stringliteral">" \t\r\n"</span>);
00258 
00259 
00260                                 <span class="comment">//</span>
00261                                 <span class="comment">// While there's a byte left to parse.</span>
00262                                 <span class="keywordflow">while</span>(*idx != <span class="charliteral">'\0'</span>)
00263                                 {
00264                                         <span class="comment">//</span>
00265                                         <span class="comment">// Get the byte value and a pointer to the end</span>
00266                                         <span class="comment">// of the hex representation.</span>
00267                                         data.push_back( <span class="keywordtype">char</span>(strtoul(idx, &amp;end, 16)) );
00268 
00269                                         <span class="comment">//</span>
00270                                         <span class="comment">// If the previous byte wasn't exactly 2 digits long,</span>
00271                                         <span class="comment">// then its an error.</span>
00272                                         <span class="keywordflow">if</span> (end != (idx+2))
00273                                         {
00274                                                 ACE_ERROR_RETURN((LM_ERROR,
00275                                                         <span class="stringliteral">"(%N:%l) System property '%s' is not a valid"</span>
00276                                                         <span class="stringliteral">" string of comma-separated hex bytes.\n"</span>,
00277                                                         name), -1);
00278                                         }
00279 
00280                                         <span class="comment">//</span>
00281                                         <span class="comment">// Advance past any whitespace following the byte.</span>
00282                                         idx = end + strspn(end, <span class="stringliteral">" \t\r\n"</span>);
00283 
00284                                         <span class="comment">//</span>
00285                                         <span class="comment">// If that's the end of the string, then we're done.</span>
00286                                         <span class="keywordflow">if</span> (*idx == <span class="charliteral">'\0'</span>)
00287                                                 <span class="keywordflow">break</span>;
00288 
00289                                         <span class="comment">//</span>
00290                                         <span class="comment">// If there's more, then it must be a comma followed by</span>
00291                                         <span class="comment">// more bytes.</span>
00292                                         <span class="keywordflow">if</span> (*idx != <span class="charliteral">','</span>)
00293                                         {
00294                                                 ACE_ERROR_RETURN((LM_ERROR,
00295                                                         <span class="stringliteral">"(%N:%l) System property '%s' is not a valid"</span>
00296                                                         <span class="stringliteral">" string of comma-separated hex bytes.\n"</span>,
00297                                                         name), -1);
00298                                         }
00299 
00300                                         <span class="comment">//</span>
00301                                         <span class="comment">// Advance to the char immediately following the comma.</span>
00302                                         ++idx;
00303 
00304                                         <span class="comment">//</span>
00305                                         <span class="comment">// Cut off any leading whitespace.</span>
00306                                         idx += strspn(idx, <span class="stringliteral">" \t\r\n"</span>);
00307                                 }
00308 
00309                                 <span class="comment">//</span>
00310                                 <span class="comment">// Set the size of the data.</span>
00311                                 length = data.size();
00312 
00313                                 <span class="comment">//</span>
00314                                 <span class="comment">// Allocate the binary data</span>
00315                                 <span class="keywordtype">char</span> *v = <span class="keyword">new</span> <span class="keywordtype">char</span>[length];
00316                                 value = v;
00317 
00318                                 <span class="comment">//</span>
00319                                 <span class="comment">// Copy the vector's contents into the value.</span>
00320                                 std::copy(data.begin(), data.end(), v);
00321                         }
00322                 }
00323         }
00324 
00325         <span class="keywordflow">if</span> (retVal)
00326                 ACE_ERROR_RETURN((LM_ERROR,
00327                         <span class="stringliteral">"(%N:%l) Failed to get system property: %s\n"</span>, name), retVal);
00328 
00329         <span class="keywordflow">return</span> 0;
00330 }
00331 
00332 
00333 
<a name="l00334"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa11" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa11">00334</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa6" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa6">SystemProperties::GetBooleanEntry</a>(<span class="keyword">const</span> <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;parent,
00335                                                                           <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">bool</span> &amp;value)
00336 {
00337         <a class="code" href="classSystemProperties.html#SystemPropertiesw1" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw1">Valuetype_t</a> vt;
00338 
00339         <span class="comment">//</span>
00340         <span class="comment">// Check the existance of the field and get its type.</span>
00341         <span class="keywordtype">int</span> retVal = this-&gt;find_value(parent, name, vt);
00342         <span class="keywordflow">if</span> (retVal == -1)
00343         {
00344                 ACE_ERROR_RETURN((LM_ERROR,
00345                         <span class="stringliteral">"(%N:%l) Failed to find system property: %s\n"</span>, name), -1);
00346         }
00347 
00348         <span class="comment">//</span>
00349         <span class="comment">// The field exists -- let's see what it is.</span>
00350         <span class="keywordflow">switch</span> (vt)
00351         {
00352         <span class="keywordflow">case</span> SystemProperties::INTEGER:
00353                 {
00354                         <span class="comment">//</span>
00355                         <span class="comment">// Try to interpret it as zero/non-zero</span>
00356                         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numeric;
00357                         <span class="keywordtype">int</span> retVal = this-&gt;get_integer_value(parent, name, numeric);
00358                         <span class="keywordflow">if</span> (retVal == 0)
00359                         {
00360                                 value = (numeric != 0);
00361                                 <span class="keywordflow">return</span> 0;
00362                         }
00363                 }
00364                 <span class="keywordflow">break</span>;
00365 
00366         <span class="keywordflow">case</span> SystemProperties::STRING:
00367                 {
00368                         <span class="comment">//</span>
00369                         <span class="comment">// Else, try to read it as a zero/nonzero or YES/NO or TRUE/FALSE string.</span>
00370                         ACE_TString tstring;
00371                         retVal = this-&gt;get_string_value(parent, name, tstring);
00372                         <span class="keywordflow">if</span> (retVal == 0)
00373                         {
00374                                 <span class="keyword">const</span> <span class="keywordtype">char</span> *val = tstring.c_str();
00375                                 
00376                                 <span class="keywordtype">char</span> *end;
00377 
00378                                 <span class="comment">//</span>
00379                                 <span class="comment">// Is it a numeric string? Can can tell if </span>
00380                                 <span class="comment">// strtol makes use of the entire string.</span>
00381                                 value = (strtol(val, &amp;end, 0) != 0);
00382                                 <span class="keywordflow">if</span> (*end == <span class="charliteral">'\0'</span>)
00383                                         <span class="keywordflow">return</span> 0;
00384                                 
00385                                 <span class="comment">//</span>
00386                                 <span class="comment">// Else, assume its a yes/no or true/false string.</span>
00387                                 value = (ACE_OS::strncasecmp(tstring.c_str(), <span class="stringliteral">"FALSE"</span>, 5) != 0)
00388                                         &amp;&amp; (ACE_OS::strncasecmp(tstring.c_str(), <span class="stringliteral">"NO"</span>, 5) != 0);
00389                                 <span class="keywordflow">return</span> 0;
00390                         }
00391                 }
00392 
00393                 <span class="keywordflow">case</span> SystemProperties::BINARY:
00394                 {
00395                         <span class="keywordtype">void</span> *data = NULL;
00396                         size_t len = 0;
00397 
00398                         <span class="comment">//</span>
00399                         <span class="comment">// Try to read it as a binary zero/nonzero value</span>
00400                         retVal = this-&gt;get_binary_value(parent, name, data, len);
00401                         <span class="keywordflow">if</span> (retVal == 0)
00402                         {
00403                                 <span class="comment">//</span>
00404                                 <span class="comment">// Start just past the end of the block and work back.</span>
00405                                 <span class="keywordtype">char</span> *it = static_cast&lt;char *&gt;(data) + len;
00406                                 value = <span class="keyword">false</span>;
00407 
00408                                 <span class="comment">//</span>
00409                                 <span class="comment">// While we haven't found a nonzero byte and we haven't</span>
00410                                 <span class="comment">// scanned the head of the data block, keep searching.</span>
00411                                 <span class="keywordflow">while</span> (value == <span class="keyword">false</span> &amp;&amp; it != data)
00412                                 {
00413                                         value = (*(--it) != 0);
00414                                 }
00415                                 
00416                                 <span class="comment">//</span>
00417                                 <span class="comment">// We're done. Release the data block and report success.</span>
00418                                 <span class="keyword">delete</span> [] static_cast&lt;char *&gt;(data);
00419                                 <span class="keywordflow">return</span> 0;
00420                         }
00421                 }
00422                 <span class="keywordflow">break</span>;
00423 
00424         <span class="keywordflow">case</span> SystemProperties::INVALID:
00425         <span class="keywordflow">default</span>:
00426                 <span class="keywordflow">break</span>;
00427         }
00428 
00429         <span class="comment">//</span>
00430         <span class="comment">// If none of the above branches returned a value, return an error.</span>
00431         ACE_ERROR_RETURN((LM_ERROR,
00432                 <span class="stringliteral">"(%N:%l) Unable to interpret field as a boolean: %s\n"</span>, name),
00433                 -1);
00434 }
00435 
00436 
00437 
00438 
00439 
<a name="l00440"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa12" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa12">00440</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa12" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa12">SystemProperties::SetStringEntry</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *sectionName, <span class="keyword">const</span> <span class="keywordtype">char</span> *name,
00441                                                                          <span class="keyword">const</span> <span class="keywordtype">char</span> *value)
00442 {
00443         <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> current;
00444         <span class="keywordtype">int</span> retVal = <a class="code" href="classSystemProperties.html#SystemPropertiesa22" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa22">GetSectionKey</a>(sectionName, current, <span class="keyword">true</span>);
00445 
00446         <span class="keywordflow">if</span> (retVal)
00447                 ACE_ERROR_RETURN((LM_ERROR,
00448                         <span class="stringliteral">"(%N:%l) Failed to find system property section: %s\n"</span>,
00449                         sectionName), retVal);
00450 
00451         retVal = this-&gt;set_string_value(current, name, value);
00452 
00453         <span class="keywordflow">if</span> (retVal)
00454                 ACE_ERROR_RETURN((LM_ERROR,
00455                         <span class="stringliteral">"(%N:%l) Failed to set system property: %s\n"</span>, name), retVal);
00456 
00457         <span class="keywordflow">return</span> 0;
00458 }
00459 
00460 
00461 
<a name="l00462"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa13" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa13">00462</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa13" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa13">SystemProperties::SetIntegerEntry</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *sectionName,
00463                                                                           <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value)
00464 {
00465         <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> current;
00466         <span class="keywordtype">int</span> retVal = <a class="code" href="classSystemProperties.html#SystemPropertiesa22" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa22">GetSectionKey</a>(sectionName, current, <span class="keyword">true</span>);
00467 
00468         <span class="keywordflow">if</span> (retVal)
00469                 ACE_ERROR_RETURN((LM_ERROR,
00470                         <span class="stringliteral">"(%N:%l) Failed to find system property section: %s\n"</span>,
00471                         sectionName), retVal);
00472 
00473         retVal = this-&gt;set_integer_value(current, name, value);
00474 
00475         <span class="keywordflow">if</span> (retVal)
00476                 ACE_ERROR_RETURN((LM_ERROR,
00477                         <span class="stringliteral">"(%N:%l) Failed to set system property: %s\n"</span>, name), retVal);
00478 
00479         <span class="keywordflow">return</span> 0;
00480 }
00481 
00482 
00483 
<a name="l00484"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa14" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa14">00484</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa14" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa14">SystemProperties::SetDoubleEntry</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *sectionName, <span class="keyword">const</span> <span class="keywordtype">char</span> *name,
00485                                                                          <span class="keywordtype">double</span> value)
00486 {
00487         <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> current;
00488         <span class="keywordtype">int</span> retVal = <a class="code" href="classSystemProperties.html#SystemPropertiesa22" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa22">GetSectionKey</a>(sectionName, current, <span class="keyword">true</span>);
00489 
00490         <span class="keywordflow">if</span> (retVal)
00491                 ACE_ERROR_RETURN((LM_ERROR,
00492                         <span class="stringliteral">"(%N:%l) Failed to find system property section: %s\n"</span>,
00493                         sectionName), retVal);
00494 
00495         std::ostringstream oss;
00496         oss &lt;&lt; value;
00497 
00498         retVal = this-&gt;set_string_value(current, name, oss.str().c_str());
00499 
00500         <span class="keywordflow">if</span> (retVal)
00501                 ACE_ERROR_RETURN((LM_ERROR,
00502                         <span class="stringliteral">"(%N:%l) Failed to set system property: %s\n"</span>, name), retVal);
00503 
00504         <span class="keywordflow">return</span> 0;
00505 }
00506 
00507 
00508 
<a name="l00509"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa15" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa15">00509</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa15" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa15">SystemProperties::SetBinaryEntry</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *sectionName,
00510                                                                          <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">void</span> * value,
00511                                                                          size_t length)
00512 {
00513         <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> current;
00514         <span class="keywordtype">int</span> retVal = <a class="code" href="classSystemProperties.html#SystemPropertiesa22" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa22">GetSectionKey</a>(sectionName, current, <span class="keyword">true</span>);
00515 
00516         <span class="keywordflow">if</span> (retVal)
00517                 ACE_ERROR_RETURN((LM_ERROR,
00518                         <span class="stringliteral">"(%N:%l) Failed to find system property section: %s\n"</span>,
00519                         sectionName), retVal);
00520 
00521         retVal = this-&gt;set_binary_value(current, name, value, length);
00522 
00523         <span class="keywordflow">if</span> (retVal)
00524                 ACE_ERROR_RETURN((LM_ERROR,
00525                 <span class="stringliteral">"(%N:%l) Failed to set system property: %s\n"</span>, name), retVal);
00526 
00527         <span class="keywordflow">return</span> 0;
00528 }
00529 
00530 
00531 
<a name="l00532"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa16" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa16">00532</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa16" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa16">SystemProperties::SetBooleanEntry</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *sectionName,
00533                                                                           <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">bool</span> value)
00534 {
00535         <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> current;
00536         <span class="keywordtype">int</span> retVal = <a class="code" href="classSystemProperties.html#SystemPropertiesa22" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa22">GetSectionKey</a>(sectionName, current, <span class="keyword">true</span>);
00537 
00538         <span class="keywordflow">if</span> (retVal)
00539                 ACE_ERROR_RETURN((LM_ERROR,
00540                         <span class="stringliteral">"(%N:%l) Failed to find system property section: %s\n"</span>,
00541                         sectionName), retVal);
00542 
00543         retVal = this-&gt;set_integer_value(current, name, value);
00544 
00545         <span class="keywordflow">if</span> (retVal)
00546                 ACE_ERROR_RETURN((LM_ERROR,
00547                         <span class="stringliteral">"(%N:%l) Failed to set system property: %s\n"</span>, name), retVal);
00548 
00549         <span class="keywordflow">return</span> 0;
00550 }
00551 
00552 
00553 
<a name="l00554"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa17" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa17">00554</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa12" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa12">SystemProperties::SetStringEntry</a>(<span class="keyword">const</span> <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;parent,
00555                                                                          <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *value)
00556 {
00557         <span class="keywordtype">int</span> retVal = this-&gt;set_string_value(parent, name, value);
00558 
00559         <span class="keywordflow">if</span> (retVal)
00560                 ACE_ERROR_RETURN((LM_ERROR,
00561                         <span class="stringliteral">"(%N:%l) Failed to set system property: %s\n"</span>, name), retVal);
00562 
00563         <span class="keywordflow">return</span> 0;
00564 }
00565 
00566 
00567 
<a name="l00568"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa18" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa18">00568</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa13" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa13">SystemProperties::SetIntegerEntry</a>(<span class="keyword">const</span> <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;parent,
00569                                                                           <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value)
00570 {
00571         <span class="keywordtype">int</span> retVal= this-&gt;set_integer_value(parent, name, value);
00572 
00573         <span class="keywordflow">if</span> (retVal)
00574                 ACE_ERROR_RETURN((LM_ERROR,
00575                         <span class="stringliteral">"(%N:%l) Failed to set system property: %s\n"</span>, name), retVal);
00576 
00577         <span class="keywordflow">return</span> 0;
00578 }
00579 
00580 
00581 
<a name="l00582"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa19" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa19">00582</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa14" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa14">SystemProperties::SetDoubleEntry</a>(<span class="keyword">const</span> <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;parent,
00583                                                                          <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">double</span> value)
00584 {
00585         std::ostringstream oss;
00586         oss &lt;&lt; value;
00587 
00588         <span class="keywordtype">int</span> retVal = this-&gt;set_string_value(parent, name, oss.str().c_str());
00589 
00590         <span class="keywordflow">if</span> (retVal)
00591                 ACE_ERROR_RETURN((LM_ERROR,
00592                         <span class="stringliteral">"(%N:%l) Failed to set system property: %s\n"</span>, name), retVal);
00593 
00594         <span class="keywordflow">return</span> 0;
00595 }
00596 
00597 
00598 
<a name="l00599"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa20" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa20">00599</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa15" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa15">SystemProperties::SetBinaryEntry</a>(<span class="keyword">const</span> <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;parent,
00600                                                                          <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">void</span> * value,
00601                                                                          size_t length)
00602 {
00603         <span class="keywordtype">int</span> retVal = this-&gt;set_binary_value(parent, name, value, length);
00604 
00605         <span class="keywordflow">if</span> (retVal)
00606                 ACE_ERROR_RETURN((LM_ERROR,
00607                         <span class="stringliteral">"(%N:%l) Failed to set system property: %s\n"</span>, name), retVal);
00608 
00609         <span class="keywordflow">return</span> 0;
00610 }
00611 
00612 
00613 
<a name="l00614"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa21" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa21">00614</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa16" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa16">SystemProperties::SetBooleanEntry</a>(<span class="keyword">const</span> <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;parent,
00615                                                                           <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">bool</span> value)
00616 {
00617         <span class="keywordtype">int</span> retVal= this-&gt;set_integer_value(parent, name, value);
00618 
00619         <span class="keywordflow">if</span> (retVal)
00620                 ACE_ERROR_RETURN((LM_ERROR,
00621                         <span class="stringliteral">"(%N:%l) Failed to set system property: %s\n"</span>, name), retVal);
00622 
00623         <span class="keywordflow">return</span> 0;
00624 }
00625 
00626 
00627 
<a name="l00628"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa24" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa24">00628</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa24" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa24">SystemProperties::EnumerateSections</a>(<span class="keywordtype">int</span> index, std::string &amp;name)
00629 {
00630         <span class="keywordflow">return</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa24" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa24">EnumerateSections</a>(this-&gt;root_section(), index, name);
00631 }
00632 
00633 
00634 
<a name="l00635"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa25" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa25">00635</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa24" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa24">SystemProperties::EnumerateSections</a>(<span class="keyword">const</span> <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;parent, <span class="keywordtype">int</span> index,
00636                                                                                 std::string &amp;name)
00637 {
00638         ACE_TString tStringName;
00639         <span class="keywordtype">int</span> retVal = this-&gt;enumerate_sections(parent, index, tStringName);
00640 
00641         <span class="keywordflow">if</span> (retVal != -1)
00642         {
00643                 name = tStringName.c_str();
00644         }
00645 
00646         <span class="keywordflow">return</span> retVal;
00647 }
00648 
00649 
00650 
<a name="l00651"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa26" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa26">00651</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa26" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa26">SystemProperties::EnumerateEntries</a>(<span class="keywordtype">int</span> index, std::string &amp;name,
00652                                                                            <a class="code" href="classSystemProperties.html#SystemPropertiesw1" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw1">Valuetype_t</a> &amp;valuetype)
00653 {
00654         <span class="keywordflow">return</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa26" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa26">EnumerateEntries</a>(this-&gt;root_section(), index, name, valuetype);
00655 }
00656 
00657 
00658 
<a name="l00659"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa27" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa27">00659</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa26" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa26">SystemProperties::EnumerateEntries</a>(<span class="keyword">const</span> <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;parent, <span class="keywordtype">int</span> index,
00660                                                                            std::string &amp;name,
00661                                                                            <a class="code" href="classSystemProperties.html#SystemPropertiesw1" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw1">Valuetype_t</a> &amp;valuetype)
00662 {
00663         ACE_TString tStringName;
00664         <span class="keywordtype">int</span> retVal = this-&gt;enumerate_values(parent, index, tStringName, valuetype);
00665 
00666         <span class="keywordflow">if</span> (retVal != -1)
00667         {
00668                 name = tStringName.c_str();
00669         }
00670 
00671         <span class="keywordflow">return</span> retVal;
00672 }
00673 
00674 
00675 
<a name="l00676"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa22" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa22">00676</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa22" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa22">SystemProperties::GetSectionKey</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *sectionName, <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;key,
00677                                                                         <span class="keywordtype">bool</span> createNew)
00678 {
00679         <span class="keywordflow">return</span> this-&gt;expand_path(this-&gt;root_section(),
00680                                                                 sectionName, key, createNew);
00681 }
00682 
00683 
00684 
<a name="l00685"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa23" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa23">00685</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa22" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa22">SystemProperties::GetSectionKey</a>(<span class="keyword">const</span> <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;parent,
00686                                                                         <span class="keyword">const</span> <span class="keywordtype">char</span> *sectionName,
00687                                                                         <a class="code" href="classSystemProperties.html#SystemPropertiesw0" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesw0">SectionKey_t</a> &amp;key, <span class="keywordtype">bool</span> createNew)
00688 {
00689         <span class="keywordflow">return</span> this-&gt;expand_path(parent, sectionName, key, createNew);
00690 }
00691 
00692 
00693 
<a name="l00694"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa28" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa28">00694</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa28" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa28">SystemProperties::ImportPropertiesRegistry</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * filename)
00695 {
00696         ACE_Registry_ImpExp impexp(*<span class="keyword">this</span>);
00697 
00698         <span class="keywordflow">return</span> impexp.import_config(filename);
00699 }
00700 
00701 
00702 
<a name="l00703"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa29" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa29">00703</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa29" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa29">SystemProperties::ExportPropertiesRegistry</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * filename)
00704 {
00705         ACE_Registry_ImpExp impexp(*<span class="keyword">this</span>);
00706 
00707         <span class="keywordflow">return</span> impexp.export_config(filename);
00708 }
00709 
00710 
00711 
<a name="l00712"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa30" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa30">00712</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa30" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa30">SystemProperties::ImportPropertiesIni</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * filename)
00713 {
00714         ACE_Ini_ImpExp impexp(*<span class="keyword">this</span>);
00715 
00716         <span class="keywordflow">return</span> impexp.import_config(filename);
00717 }
00718 
00719 
00720 
<a name="l00721"></a><a class="code" href="classSystemProperties.html#SystemPropertiesa31" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa31">00721</a> <span class="keywordtype">int</span> <a class="code" href="classSystemProperties.html#SystemPropertiesa31" tppabs="http://dsacss.sourceforge.net/classSystemProperties.html#SystemPropertiesa31">SystemProperties::ExportPropertiesIni</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * filename)
00722 {
00723         ACE_Ini_ImpExp impexp(*<span class="keyword">this</span>);
00724 
00725         <span class="keywordflow">return</span> impexp.export_config(filename);
00726 }
00727 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jun 15 11:49:55 2004 for DSACSS Operational Code by
<a href="javascript:if(confirm('http://www.doxygen.org/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.doxygen.org/index.html'" tppabs="http://www.doxygen.org/index.html">
<img src="doxygen.png" tppabs="http://dsacss.sourceforge.net/doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
