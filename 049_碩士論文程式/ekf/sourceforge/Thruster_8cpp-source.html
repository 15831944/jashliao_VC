<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DSACSS Operational Code: Thruster.cpp Source File</title>
<link href="doxygen.css" tppabs="http://dsacss.sourceforge.net/doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<h1>Thruster.cpp</h1><a href="Thruster_8cpp.html" tppabs="http://dsacss.sourceforge.net/Thruster_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 
00008 
00010 
00011 
00012 
00013 <span class="preprocessor">#include "<a class="code" href="Thruster_8h.html" tppabs="http://dsacss.sourceforge.net/Thruster_8h.html">Thruster.h</a>"</span>
00014 
00016 <span class="comment">// Construction/Destruction</span>
00018 <span class="comment"></span>
<a name="l00019"></a><a class="code" href="classThruster.html#Thrustera0" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera0">00019</a> <a class="code" href="classThruster.html#Thrustera0" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera0">Thruster::Thruster</a>()
00020 {
00021 
00022 }
<a name="l00023"></a><a class="code" href="classThruster.html#Thrustera1" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera1">00023</a> <a class="code" href="classThruster.html#Thrustera0" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera0">Thruster::Thruster</a>(<a class="code" href="structcfgBody.html" tppabs="http://dsacss.sourceforge.net/structcfgBody.html">cfgBody</a>&amp; cfgdat) 
00024 {               
00025         <span class="keyword">const</span> <span class="keywordtype">char</span> *myCommands[20] = {<span class="stringliteral">"Number"</span>, <span class="stringliteral">"Pressure"</span>};
00026         <span class="comment">//const char *myCommands[20] = {"Number", "ThrustVect", "Position", "Pressure"};</span>
00027         Vector tmpVect;
00028 
00029         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; cfgdat.<a class="code" href="structcfgBody.html#cfgBodyo3" tppabs="http://dsacss.sourceforge.net/structcfgBody.html#cfgBodyo3">keys</a>[i][0]; i++){
00030                 <span class="keywordflow">switch</span>(<a class="code" href="Misc_8cpp.html#a3" tppabs="http://dsacss.sourceforge.net/Misc_8cpp.html#a3">getCmdIndex</a>(myCommands, cfgdat.<a class="code" href="structcfgBody.html#cfgBodyo3" tppabs="http://dsacss.sourceforge.net/structcfgBody.html#cfgBodyo3">keys</a>[i])){
00031                         <span class="keywordflow">case</span> 0:
00032                                 <a class="code" href="classThruster.html#Thrusterr3" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrusterr3">m_ThrusterNumber</a> = atoi(cfgdat.<a class="code" href="structcfgBody.html#cfgBodyo4" tppabs="http://dsacss.sourceforge.net/structcfgBody.html#cfgBodyo4">vals</a>[i][0]);
00033                                 <span class="keywordflow">break</span>;
00034                         <span class="keywordflow">case</span> 1:
00035                                 <a class="code" href="classThruster.html#Thrusterr1" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrusterr1">m_CurrentAirPressure</a> = atof(cfgdat.<a class="code" href="structcfgBody.html#cfgBodyo4" tppabs="http://dsacss.sourceforge.net/structcfgBody.html#cfgBodyo4">vals</a>[i][0]);
00036                                 <span class="keywordflow">break</span>;
00037 <span class="comment">/*                      case 1:</span>
00038 <span class="comment">                                for (int cc = 0; cc &lt; 3 &amp;&amp; cfgdat.vals[i][cc][0]; cc++)</span>
00039 <span class="comment">                                        tmpVect(cc+1) = atof(cfgdat.vals[i][cc]);</span>
00040 <span class="comment">                                m_ThrustVector= tmpVect;</span>
00041 <span class="comment">                                break;</span>
00042 <span class="comment">                        case 2:</span>
00043 <span class="comment">                                for (int cc = 0; cc &lt; 3 &amp;&amp; cfgdat.vals[i][cc][0]; cc++)</span>
00044 <span class="comment">                                        tmpVect(cc+1) = atof(cfgdat.vals[i][cc]);</span>
00045 <span class="comment">                                m_PositionVector = tmpVect;*/</span>
00046                         <span class="keywordflow">default</span>:
00047                                 <span class="keywordflow">break</span>;
00048                 }
00049         }       
00050         <a class="code" href="classThruster.html#Thrustera6" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera6">Initialize</a>();
00051 }
00052 
<a name="l00053"></a><a class="code" href="classThruster.html#Thrustera2" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera2">00053</a> <a class="code" href="classThruster.html#Thrustera2" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera2">Thruster::~Thruster</a>()
00054 {
00055     <a class="code" href="classThruster.html#Thrustera3" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera3">Stop</a>();
00056     <a class="code" href="classDevice.html#WheelSensorb1" tppabs="http://dsacss.sourceforge.net/classDevice.html#WheelSensorb1">Deinitialize</a>();
00057 }
00058 
<a name="l00059"></a><a class="code" href="classThruster.html#Thrustera6" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera6">00059</a> <span class="keywordtype">int</span> <a class="code" href="classThruster.html#Thrustera6" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera6">Thruster::Initialize</a>()
00060 {
00061         <a class="code" href="classThruster.html#Thrusterr0" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrusterr0">m_PhysicalThruster</a>.<a class="code" href="classPhysicalThruster.html#PhysicalThrustera5" tppabs="http://dsacss.sourceforge.net/classPhysicalThruster.html#PhysicalThrustera5">Initialize</a>();
00062 <span class="comment">//      m_DAQCard = DAQCard::Instance();</span>
00063 
00064         <a class="code" href="classThruster.html#Thrustera7" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera7">SetThrustLevel</a>();
00065         
00066         <span class="keywordflow">return</span> 0;
00067 }
00068 
<a name="l00069"></a><a class="code" href="classThruster.html#Thrustera4" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera4">00069</a> <span class="keywordtype">void</span> <a class="code" href="classThruster.html#Thrustera4" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera4">Thruster::StartFire</a>(BYTE signal)
00070 {
00071         <a class="code" href="classThruster.html#Thrusterr0" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrusterr0">m_PhysicalThruster</a>.<a class="code" href="classPhysicalThruster.html#PhysicalThrustera2" tppabs="http://dsacss.sourceforge.net/classPhysicalThruster.html#PhysicalThrustera2">StartFire</a>(signal);
00072 }
00073 
<a name="l00074"></a><a class="code" href="classThruster.html#Thrustera5" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera5">00074</a> <span class="keywordtype">void</span> <a class="code" href="classThruster.html#Thrustera5" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera5">Thruster::StopFire</a>()
00075 {
00076         <a class="code" href="classThruster.html#Thrusterr0" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrusterr0">m_PhysicalThruster</a>.<a class="code" href="classPhysicalThruster.html#PhysicalThrustera3" tppabs="http://dsacss.sourceforge.net/classPhysicalThruster.html#PhysicalThrustera3">StopFire</a>();
00077 }
00078 
<a name="l00079"></a><a class="code" href="classThruster.html#Thrustera7" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera7">00079</a> <span class="keywordtype">void</span> <a class="code" href="classThruster.html#Thrustera7" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera7">Thruster::SetThrustLevel</a>()
00080 {
00081         <span class="comment">// this assumes the burn time will be &gt; 600 ms</span>
00082         <span class="comment">// so we have no burn time arguement as well.</span>
00083         <a class="code" href="classThruster.html#Thrusterr2" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrusterr2">m_CurrentThrustMagnitude</a> = <a class="code" href="classThruster.html#Thrusterr0" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrusterr0">m_PhysicalThruster</a>.<a class="code" href="classPhysicalThruster.html#PhysicalThrustera4" tppabs="http://dsacss.sourceforge.net/classPhysicalThruster.html#PhysicalThrustera4">CalcThrustLevel</a>(<a class="code" href="classThruster.html#Thrusterr1" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrusterr1">m_CurrentAirPressure</a>);
00084 }
00085 
<a name="l00086"></a><a class="code" href="classThruster.html#Thrustera8" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera8">00086</a> <span class="keywordtype">double</span> <a class="code" href="classThruster.html#Thrustera8" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera8">Thruster::GetThrustLevel</a>()<span class="keyword"> const</span>
00087 <span class="keyword"></span>{
00088         <span class="keywordflow">return</span> <a class="code" href="classThruster.html#Thrusterr2" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrusterr2">m_CurrentThrustMagnitude</a>;
00089 }
00090 
<a name="l00091"></a><a class="code" href="classThruster.html#Thrustera9" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera9">00091</a> <span class="keywordtype">double</span> <a class="code" href="classThruster.html#Thrustera9" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera9">Thruster::GetCurrentPressure</a>()<span class="keyword"> const</span>
00092 <span class="keyword"></span>{
00093         <span class="keywordflow">return</span> <a class="code" href="classThruster.html#Thrusterr1" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrusterr1">m_CurrentAirPressure</a>;
00094 }
00095 
00096 <span class="comment">/*</span>
00097 <span class="comment">int Thruster::Initialize()</span>
00098 <span class="comment">{</span>
00099 <span class="comment">    </span>
00100 <span class="comment">    return Actuator::Initialize();</span>
00101 <span class="comment">}</span>
00102 <span class="comment"></span>
00103 <span class="comment">int Thruster::Initialize(const string&amp; _sInitString) </span>
00104 <span class="comment">{ </span>
00105 <span class="comment">    return Actuator::Initialize();</span>
00106 <span class="comment">}</span>
00107 <span class="comment"></span>
00108 <span class="comment">int Thruster::Deinitialize()</span>
00109 <span class="comment">{</span>
00110 <span class="comment">    </span>
00111 <span class="comment">    return Actuator::Deinitialize();</span>
00112 <span class="comment">}</span>
00113 <span class="comment">*/</span>
<a name="l00114"></a><a class="code" href="classThruster.html#Thrustera3" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera3">00114</a> <span class="keywordtype">int</span> <a class="code" href="classThruster.html#Thrustera3" tppabs="http://dsacss.sourceforge.net/classThruster.html#Thrustera3">Thruster::Stop</a>()
00115 {
00116         <span class="keywordflow">return</span> <a class="code" href="Error_8h.html#a1" tppabs="http://dsacss.sourceforge.net/Error_8h.html#a1">NO_ERROR</a>;
00117 }
00118 
00119 <span class="comment">/*void SetThrustVector(const Vector&amp; ThrustVect)</span>
00120 <span class="comment">{</span>
00121 <span class="comment">        m_ThrustVector = ThrustVect;</span>
00122 <span class="comment">}*/</span>
00123 
00124 <span class="comment">// Do not change the comments below - they will be added automatically by CVS</span>
00125 <span class="comment">/*****************************************************************************</span>
00126 <span class="comment">*       $Log: Thruster.cpp,v $</span>
00127 <span class="comment">*       Revision 1.4  2004/06/15 14:58:45  shaigunjoe</span>
00128 <span class="comment">*       Added changes for digital signal</span>
00129 <span class="comment">*       </span>
00130 <span class="comment">*       Revision 1.3  2004/05/27 19:59:06  shoemaker</span>
00131 <span class="comment">*       Made changes for analog output thruster control</span>
00132 <span class="comment">*       </span>
00133 <span class="comment">*       Revision 1.2  2003/06/17 15:55:55  simpliciter</span>
00134 <span class="comment">*       Added blank line at end of file.</span>
00135 <span class="comment">*       </span>
00136 <span class="comment">*       Revision 1.1.1.1  2003/06/06 18:44:15  simpliciter</span>
00137 <span class="comment">*       Initial submission.</span>
00138 <span class="comment">*       </span>
00139 <span class="comment">*</span>
00140 <span class="comment">******************************************************************************/</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jun 15 11:49:55 2004 for DSACSS Operational Code by
<a href="javascript:if(confirm('http://www.doxygen.org/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.doxygen.org/index.html'" tppabs="http://www.doxygen.org/index.html">
<img src="doxygen.png" tppabs="http://dsacss.sourceforge.net/doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
