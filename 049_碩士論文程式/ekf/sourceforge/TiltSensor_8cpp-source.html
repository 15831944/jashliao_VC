<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DSACSS Operational Code: TiltSensor.cpp Source File</title>
<link href="doxygen.css" tppabs="http://dsacss.sourceforge.net/doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<h1>TiltSensor.cpp</h1><a href="TiltSensor_8cpp.html" tppabs="http://dsacss.sourceforge.net/TiltSensor_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 
00008 
00010 
00011 
00012 
00013 <span class="preprocessor">#include "<a class="code" href="TiltSensor_8h.html" tppabs="http://dsacss.sourceforge.net/TiltSensor_8h.html">TiltSensor.h</a>"</span>
00014 <span class="preprocessor">#include "<a class="code" href="CfgParse_8h.html" tppabs="http://dsacss.sourceforge.net/CfgParse_8h.html">CfgParse.h</a>"</span>
00015 
00017 <span class="comment">// Construction/Destruction</span>
00019 <span class="comment"></span>
<a name="l00020"></a><a class="code" href="classTiltSensor.html#TiltSensora0" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora0">00020</a> <a class="code" href="classTiltSensor.html#TiltSensora0" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora0">TiltSensor::TiltSensor</a>()
00021 {
00022 }
00023 
<a name="l00024"></a><a class="code" href="classTiltSensor.html#TiltSensora1" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora1">00024</a> <a class="code" href="classTiltSensor.html#TiltSensora0" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora0">TiltSensor::TiltSensor</a>(<a class="code" href="structcfgBody.html" tppabs="http://dsacss.sourceforge.net/structcfgBody.html">cfgBody</a>&amp; cfgdat)
00025 {
00026   <span class="keyword">const</span> <span class="keywordtype">char</span> *myCommands[20] = {<span class="stringliteral">"Location"</span>, <span class="stringliteral">"Rotation"</span>, <span class="stringliteral">"Port"</span>};
00027   <span class="comment">/* "Location" - Sensor location</span>
00028 <span class="comment">  *  "Rotation" - Sensor to body quaternion </span>
00029 <span class="comment">  *  "Port" - String representing sensor com port */</span>
00030   Vector tmpVec1(3);
00031   Vector tmpVec2(4);
00032   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; cfgdat.<a class="code" href="structcfgBody.html#cfgBodyo3" tppabs="http://dsacss.sourceforge.net/structcfgBody.html#cfgBodyo3">keys</a>[i][0]; i++) {
00033     <span class="keywordflow">switch</span>(<a class="code" href="Misc_8cpp.html#a3" tppabs="http://dsacss.sourceforge.net/Misc_8cpp.html#a3">getCmdIndex</a>(myCommands, cfgdat.<a class="code" href="structcfgBody.html#cfgBodyo3" tppabs="http://dsacss.sourceforge.net/structcfgBody.html#cfgBodyo3">keys</a>[i])) {
00034           <span class="keywordflow">case</span> 0:
00035                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 3 &amp;&amp; cfgdat.<a class="code" href="structcfgBody.html#cfgBodyo4" tppabs="http://dsacss.sourceforge.net/structcfgBody.html#cfgBodyo4">vals</a>[i][j][0];j++)
00036                         tmpVec1(j+1) = atof(cfgdat.<a class="code" href="structcfgBody.html#cfgBodyo4" tppabs="http://dsacss.sourceforge.net/structcfgBody.html#cfgBodyo4">vals</a>[i][j]);
00037                 <a class="code" href="classTiltSensor.html#TiltSensorr1" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensorr1">m_Location</a> = tmpVec1;
00038                 <span class="keywordflow">break</span>;
00039         
00040           <span class="keywordflow">case</span> 1:
00041                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 4 &amp;&amp; cfgdat.<a class="code" href="structcfgBody.html#cfgBodyo4" tppabs="http://dsacss.sourceforge.net/structcfgBody.html#cfgBodyo4">vals</a>[i][j][0];j++)
00042                         tmpVec2(j+1) = atof(cfgdat.<a class="code" href="structcfgBody.html#cfgBodyo4" tppabs="http://dsacss.sourceforge.net/structcfgBody.html#cfgBodyo4">vals</a>[i][j]);
00043                 <a class="code" href="classTiltSensor.html#TiltSensorr2" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensorr2">m_Q</a> = tmpVec2; 
00044                 
00045           <span class="keywordflow">case</span> 2:
00046                 <a class="code" href="classTiltSensor.html#TiltSensorr0" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensorr0">m_PhysicalTiltSensor</a>.<a class="code" href="classPhysicalTiltSensor.html#PhysicalTiltSensora6" tppabs="http://dsacss.sourceforge.net/classPhysicalTiltSensor.html#PhysicalTiltSensora6">SetPort</a>(string(cfgdat.<a class="code" href="structcfgBody.html#cfgBodyo4" tppabs="http://dsacss.sourceforge.net/structcfgBody.html#cfgBodyo4">vals</a>[i][0]));
00047             <span class="keywordflow">break</span>;
00048 
00049           <span class="keywordflow">default</span>:
00050                 <span class="keywordflow">break</span>;
00051         
00052     }
00053   }
00054 }
00055 
<a name="l00056"></a><a class="code" href="classTiltSensor.html#TiltSensora2" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora2">00056</a> <a class="code" href="classTiltSensor.html#TiltSensora2" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora2">TiltSensor::~TiltSensor</a>()
00057 {
00058 }
00059 
<a name="l00060"></a><a class="code" href="classTiltSensor.html#TiltSensora3" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora3">00060</a> <span class="keywordtype">int</span> <a class="code" href="classTiltSensor.html#TiltSensora3" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora3">TiltSensor::Initialize</a>()
00061 {
00062         <span class="keywordflow">return</span> <a class="code" href="classTiltSensor.html#TiltSensorr0" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensorr0">m_PhysicalTiltSensor</a>.<a class="code" href="classPhysicalTiltSensor.html#PhysicalTiltSensora2" tppabs="http://dsacss.sourceforge.net/classPhysicalTiltSensor.html#PhysicalTiltSensora2">Initialize</a>();
00063 }
00064 
<a name="l00065"></a><a class="code" href="classTiltSensor.html#TiltSensora4" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora4">00065</a> Vector <a class="code" href="classTiltSensor.html#TiltSensora4" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora4">TiltSensor::GetSensorToBodyQuaternion</a>()
00066 {
00067         <span class="keywordflow">return</span> <a class="code" href="classTiltSensor.html#TiltSensorr2" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensorr2">m_Q</a>;
00068 }
00069 
<a name="l00070"></a><a class="code" href="classTiltSensor.html#TiltSensora5" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora5">00070</a> Vector <a class="code" href="classTiltSensor.html#TiltSensora5" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora5">TiltSensor::GetSensorLocation</a>()
00071 { 
00072         <span class="keywordflow">return</span> <a class="code" href="classTiltSensor.html#TiltSensorr1" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensorr1">m_Location</a>;
00073 }
00074 
<a name="l00075"></a><a class="code" href="classTiltSensor.html#TiltSensora6" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora6">00075</a> <span class="keywordtype">void</span> <a class="code" href="classTiltSensor.html#TiltSensora6" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora6">TiltSensor::GetAngles</a>(<span class="keywordtype">double</span>&amp; pitch, <span class="keywordtype">double</span>&amp; roll, <span class="keywordtype">double</span>&amp; t)
00076 {
00077         <a class="code" href="classTiltSensor.html#TiltSensorr0" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensorr0">m_PhysicalTiltSensor</a>.<a class="code" href="classPhysicalTiltSensor.html#PhysicalTiltSensora4" tppabs="http://dsacss.sourceforge.net/classPhysicalTiltSensor.html#PhysicalTiltSensora4">GetAngles</a>(pitch,roll,t);
00078 }
00079 
<a name="l00080"></a><a class="code" href="classTiltSensor.html#TiltSensora7" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora7">00080</a> <span class="keywordtype">int</span> <a class="code" href="classTiltSensor.html#TiltSensora7" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora7">TiltSensor::GetFD</a>()
00081 {
00082         <span class="keywordflow">return</span> <a class="code" href="classTiltSensor.html#TiltSensorr0" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensorr0">m_PhysicalTiltSensor</a>.<a class="code" href="classPhysicalTiltSensor.html#PhysicalTiltSensora5" tppabs="http://dsacss.sourceforge.net/classPhysicalTiltSensor.html#PhysicalTiltSensora5">GetFD</a>();
00083 }
00084 
<a name="l00085"></a><a class="code" href="classTiltSensor.html#TiltSensora8" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora8">00085</a> <span class="keywordtype">void</span> <a class="code" href="classTiltSensor.html#TiltSensora8" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora8">TiltSensor::SetPort</a>(string Port)
00086 {
00087         <a class="code" href="classTiltSensor.html#TiltSensorr0" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensorr0">m_PhysicalTiltSensor</a>.<a class="code" href="classPhysicalTiltSensor.html#PhysicalTiltSensora6" tppabs="http://dsacss.sourceforge.net/classPhysicalTiltSensor.html#PhysicalTiltSensora6">SetPort</a>(Port);
00088 }
00089 
<a name="l00090"></a><a class="code" href="classTiltSensor.html#TiltSensora9" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora9">00090</a> <a class="code" href="classMeasurement.html" tppabs="http://dsacss.sourceforge.net/classMeasurement.html">Measurement</a> <a class="code" href="classTiltSensor.html#TiltSensora9" tppabs="http://dsacss.sourceforge.net/classTiltSensor.html#TiltSensora9">TiltSensor::GetMeasurement</a>()
00091 {
00092         <a class="code" href="classMeasurement.html" tppabs="http://dsacss.sourceforge.net/classMeasurement.html">Measurement</a> M;
00093         <span class="keywordflow">return</span> M;
00094 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jun 15 11:49:55 2004 for DSACSS Operational Code by
<a href="javascript:if(confirm('http://www.doxygen.org/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.doxygen.org/index.html'" tppabs="http://www.doxygen.org/index.html">
<img src="doxygen.png" tppabs="http://dsacss.sourceforge.net/doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
