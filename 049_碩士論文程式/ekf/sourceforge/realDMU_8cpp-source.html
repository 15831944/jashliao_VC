<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DSACSS Operational Code: realDMU.cpp Source File</title>
<link href="doxygen.css" tppabs="http://dsacss.sourceforge.net/doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<h1>realDMU.cpp</h1><a href="realDMU_8cpp.html" tppabs="http://dsacss.sourceforge.net/realDMU_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/************************************************************************************************/</span>
00012 <span class="preprocessor">#include &lt;iostream&gt;</span>
00013 <span class="preprocessor">#include "<a class="code" href="DMU_8h.html" tppabs="http://dsacss.sourceforge.net/DMU_8h.html">DMU.h</a>"</span>
00014 <span class="preprocessor">#include "Matrix.h"</span>
00015 <span class="preprocessor">#include "Rotation.h"</span>
00016 
00017 <span class="keyword">using</span> <span class="keyword">namespace </span>O_SESSAME;
00018 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00019 
<a name="l00020"></a><a class="code" href="classDMU.html#DMUv0" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUv0">00020</a> <a class="code" href="classDMU.html" tppabs="http://dsacss.sourceforge.net/classDMU.html">DMU</a>* <a class="code" href="classDMU.html#DMUv0" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUv0">DMU::s_instance</a> = NULL;
00021 
<a name="l00022"></a><a class="code" href="classDMU.html#DMUa0" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa0">00022</a> <a class="code" href="classDMU.html#DMUa0" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa0">DMU::DMU</a>(<span class="keywordtype">int</span> _mode)
00023 {
00024         <a class="code" href="classDMU.html#DMUa6" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa6">Initialize</a>(_mode);
00025 }
00026 
<a name="l00027"></a><a class="code" href="classDMU.html#DMUe0" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUe0">00027</a> <a class="code" href="classDMU.html" tppabs="http://dsacss.sourceforge.net/classDMU.html">DMU</a>* <a class="code" href="classDMU.html#DMUe0" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUe0">DMU::Instance</a>(<span class="keywordtype">int</span> _mode)
00028 {
00029         <span class="comment">/* If first time being called, return a pointer </span>
00030 <span class="comment">         to an instance of a new DMU.  Otherwise return</span>
00031 <span class="comment">         a pointer to an instance of a DMU which was made</span>
00032 <span class="comment">         earlier.  Essentially, there can be only one DMU. </span>
00033 <span class="comment">        The _mode argument is passed through the constuctor </span>
00034 <span class="comment">        to the initialization funtion, since the DMU is initialized differently</span>
00035 <span class="comment">        in analog and digital operation */</span>
00036         <span class="keywordflow">if</span> (<a class="code" href="classDMU.html#DMUv0" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUv0">s_instance</a>==NULL)
00037         {
00038                 <span class="comment">//cout &lt;&lt; " you have an instance of a new dmu " &lt;&lt; endl;</span>
00039                 <a class="code" href="classDMU.html#DMUv0" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUv0">s_instance</a> = <span class="keyword">new</span> <a class="code" href="classDMU.html#DMUa0" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa0">DMU</a>(_mode);
00040         }
00041         <span class="keywordflow">return</span> <a class="code" href="classDMU.html#DMUv0" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUv0">s_instance</a>;
00042 }
00043 
<a name="l00044"></a><a class="code" href="classDMU.html#DMUa6" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa6">00044</a> <span class="keywordtype">int</span> <a class="code" href="classDMU.html#DMUa6" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa6">DMU::Initialize</a>(<span class="keywordtype">int</span> _mode)
00045 {
00046         <span class="comment">// this is temporary, just used because the parsing code </span>
00047         <span class="comment">// is not ready yet</span>
00048 
00049         <span class="comment">// hmmm.. guess this should come from config stuff????</span>
00050         Vector tempVector3(3);
00051         Vector tempQuat4(4);
00052 
00053         tempVector3(1) = 0.0;
00054         tempVector3(2) = 0.0;
00055         tempVector3(3) = 0.0;
00056 
00057         tempQuat4(1) = 0.0;
00058         tempQuat4(2) = 0.0;
00059         tempQuat4(3) = 0.0;
00060         tempQuat4(4) = 1.0;
00061 
00062         <a class="code" href="classDMU.html#DMUa7" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa7">SetLocation</a>(tempVector3);
00063         <a class="code" href="classDMU.html#DMUa8" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa8">SetSensorToBodyQuaternions</a>(tempQuat4);
00064         
00065         <span class="comment">// NOTE: done outside of _mode check to assure that data members are initialized,</span>
00066         <span class="comment">// on the off chance they will be referenced despite not being in analog or digital mode.</span>
00067         <span class="comment">// this might look alittle different with config parsing stuff.</span>
00068         
00069         <a class="code" href="classDMU.html#DMUr6" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr6">m_prate</a> = 200;  <span class="comment">// this variable doesn't appear to be used for anything but an assignment check?  -jls</span>
00070         <a class="code" href="classDMU.html#DMUr7" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr7">m_tempBuffSize</a> = 100; <span class="comment">// this is likely excessively large</span>
00071         <a class="code" href="classDMU.html#DMUr11" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr11">m_timeToler</a> = 31250; <span class="comment">// in usecs, 32Hz is the max rate for *serial* comm.</span>
00072 
00073         <a class="code" href="classDMU.html#DMUr13" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr13">m_numread</a> = 0;
00074         <a class="code" href="classDMU.html#DMUr12" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr12">m_firstCall</a> = 1;
00075 
00076         <span class="comment">// allocate the memory that holds the temporary read data buffer </span>
00077         <a class="code" href="classDMU.html#DMUr5" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr5">m_ptrToReadData</a> = <span class="keyword">new</span> <a class="code" href="structadat__t.html" tppabs="http://dsacss.sourceforge.net/structadat__t.html">adat_t</a>[<a class="code" href="classDMU.html#DMUr7" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr7">m_tempBuffSize</a>];
00078         
00079         <span class="comment">// Now perform initialization, which depends on MoPak mode</span>
00080         <span class="keywordflow">switch</span>(_mode)
00081         {
00082                 <span class="keywordflow">case</span> 1:
00083                         <span class="keywordflow">if</span> (<a class="code" href="dmu_8c.html#a10" tppabs="http://dsacss.sourceforge.net/dmu_8c.html#a10">dmuInit</a>(1024, <a class="code" href="classDMU.html#DMUr6" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr6">m_prate</a>, 0)==-1) <span class="comment">// the -1 from dmu.c</span>
00084                         {
00085                                 cout &lt;&lt; <span class="stringliteral">" oops, 'dmuInit()' failed "</span> &lt;&lt; endl;       
00086                                 <span class="comment">// some error return condition?</span>
00087                                 <span class="keywordflow">return</span> 1;
00088                         }
00089                         <span class="keywordflow">break</span>;
00090                 <span class="keywordflow">case</span> 2:
00091                         <span class="comment">// Note: there used to be code here to initialize the DAQ card,</span>
00092                         <span class="comment">// but now that is done in DAQCard::Initialize(), so it is totally separate,</span>
00093                         <span class="comment">// and this case doesn't really do anything.</span>
00094                         <span class="keywordflow">break</span>;
00095                 <span class="keywordflow">default</span>:
00096                         cout &lt;&lt; <span class="stringliteral">" bad mode! "</span> &lt;&lt; endl;
00097         }
00098         <span class="keywordflow">return</span> 0;
00099 }
00100 
00101 <span class="keywordtype">void</span> <a class="code" href="classDMU.html#DMUa7" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa7">DMU::SetLocation</a>(<span class="keyword">const</span> Vector&amp; _newDeviceLocation)
00102 {
00103         <a class="code" href="classDMU.html#DMUr0" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr0">m_location</a> = _newDeviceLocation;
00104 }
00105 
00106 Vector <a class="code" href="classDMU.html#DMUa4" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa4">DMU::GetLocation</a>()
00107 {       
00108         <span class="keywordflow">return</span> <a class="code" href="classDMU.html#DMUr0" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr0">m_location</a>;
00109 }
00110 
00111 <span class="keywordtype">void</span> <a class="code" href="classDMU.html#DMUa8" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa8">DMU::SetSensorToBodyQuaternions</a>(<span class="keyword">const</span> Vector&amp; _newDeviceQuaternion)
00112 {
00113         <a class="code" href="classDMU.html#DMUr1" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr1">m_sensorToBodyQuaternion</a> = _newDeviceQuaternion;
00114         
00115         <span class="comment">// m_sensorToBodyQuaternion is given in config file,</span>
00116         <span class="comment">// where the frame of the DMU, F_dmu, is defined on the DMU itself,</span>
00117         <span class="comment">// the body-fixed frame, F_b, is defined elsewhere.</span>
00118         
00119         <span class="comment">// let each rate gyro (RG) have its own frame,</span>
00120         <span class="comment">// where the RG is defined as being located on the 1-axis,</span>
00121         <span class="comment">// and the other two axis are taken from F_dmu,</span>
00122         <span class="comment">// keeping the right-handedness</span>
00123         <span class="comment">//</span>
00124         <span class="comment">// likewise let each linear accelerometer (LAmeter) have its own frame,</span>
00125         <span class="comment">// where the LAmeter is defined as measuring positve acceleration along</span>
00126         <span class="comment">// the frame's 1-axis, and the other axes same as above.</span>
00127         <span class="comment">// (note: just "LA" by itself might be confused with linear actuator)</span>
00128         
00129         <span class="comment">// quaternion that describes both the </span>
00130         <span class="comment">// orientation of "x" RG frame wrt F_dmu and the</span>
00131         <span class="comment">// orientation of "x" LAmeter frame wrt F_dmu</span>
00132         Quaternion q1( 0.0, 0.0, 0.0, 1.0);
00133         
00134         <span class="comment">// quaternion that describes both the</span>
00135         <span class="comment">// orientation of "y" RG frame wrt F_dmu and the</span>
00136         <span class="comment">// orientation of "y" LAmeter frame wrt F_dmu</span>
00137         Quaternion q2( 0.5, 0.5, 0.5, -0.5);
00138         
00139         <span class="comment">// quaternion that describes both the</span>
00140         <span class="comment">// orientation of "z" RG frame wrt F_dmu and the</span>
00141         <span class="comment">// orientation of "z" LAmeter frame wrt F_dmu</span>
00142         Quaternion q3( 0.5, 0.5, 0.5, 0.5);
00143 
00144         <span class="comment">// convert q1 into R_rg1_to_dmu</span>
00145         Rotation R_rg1_to_dmu(q1);
00146         
00147         <span class="comment">// convert q2 into R_rg2_to_dmu </span>
00148         Rotation R_rg2_to_dmu(q2);
00149         
00150         <span class="comment">// convert q3 into R_rg3_to_dmu</span>
00151         Rotation R_rg3_to_dmu(q3);
00152         
00153         <span class="comment">// convert m_dmuToBodyQuaternion to R_dmu_to_b</span>
00154         Quaternion q0(m_sensorToBodyQuaternion);
00155         Rotation R_dmu_to_b(q0);
00156         
00157         <span class="comment">// calculate rotation from rg1 to body frame</span>
00158         Rotation R_rg1_to_b;
00159          R_rg1_to_b = R_dmu_to_b * R_rg1_to_dmu;
00160         
00161         <span class="comment">// calculate rotation from rg2 to body frame</span>
00162         Rotation R_rg2_to_b;
00163         R_rg2_to_b = R_dmu_to_b * R_rg2_to_dmu;
00164         
00165         <span class="comment">// calculate rotation from rg3 to body frame</span>
00166         Rotation R_rg3_to_b;
00167         R_rg3_to_b = R_dmu_to_b * R_rg3_to_dmu;
00168         
00169         <span class="comment">// convert R_rg1_to_b into q_rg1_to_b</span>
00170         <span class="comment">// and set as m_dmuXToBodyQuaternion</span>
00171         Quaternion q_rg1_to_b;
00172         q_rg1_to_b = R_rg1_to_b.GetQuaternion();
00173         <a class="code" href="classDMU.html#DMUr2" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr2">m_dmuXToBodyQuaternion</a> = q_rg1_to_b;
00174          
00175         <span class="comment">// convert R_rg2_to_b into q_rg2_to_b;</span>
00176         <span class="comment">// and set as m_dmuYToBodyQuaternion</span>
00177         Quaternion q_rg2_to_b;
00178         q_rg2_to_b = R_rg2_to_b.GetQuaternion();
00179         <a class="code" href="classDMU.html#DMUr3" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr3">m_dmuYToBodyQuaternion</a> = q_rg2_to_b;
00180         
00181         <span class="comment">// convert R_rg3_to_b into q_rg3_to_b; </span>
00182         <span class="comment">// and set as m_dmuZToBodyQuaternion</span>
00183         Quaternion q_rg3_to_b;
00184         q_rg3_to_b = R_rg3_to_b.GetQuaternion();
00185         <a class="code" href="classDMU.html#DMUr4" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr4">m_dmuZToBodyQuaternion</a> = q_rg3_to_b;
00186 }
00187         
00188 Vector <a class="code" href="classDMU.html#DMUa5" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa5">DMU::GetSensorToBodyQuaternion</a>( <span class="keywordtype">int</span> id )
00189 {
00190         
00191         <span class="keywordflow">if</span> ( id == 1 | id == 4 )
00192         {
00193                 <span class="comment">// xRG or xLAmeter</span>
00194                 <span class="keywordflow">return</span> <a class="code" href="classDMU.html#DMUr2" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr2">m_dmuXToBodyQuaternion</a>;
00195         }
00196         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( id == 2 | id == 5 )
00197         {
00198                 <span class="comment">// yRG or yLAmeter</span>
00199                 <span class="keywordflow">return</span> <a class="code" href="classDMU.html#DMUr3" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr3">m_dmuYToBodyQuaternion</a>;
00200         }
00201         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( id == 3 | id == 6 )
00202         {
00203                 <span class="comment">// zRG or zLAmeter</span>
00204                 <span class="keywordflow">return</span> <a class="code" href="classDMU.html#DMUr4" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr4">m_dmuZToBodyQuaternion</a>;
00205         }
00206         <span class="comment">// no default case.</span>
00207         <span class="comment">// what about error?</span>
00208         <span class="comment">//</span>
00209         <span class="comment">// do something more elegant and logical in future</span>
00210         Vector errorQuat4;
00211         errorQuat4(1) = 0.0;
00212         errorQuat4(2) = 0.0;
00213         errorQuat4(3) = 0.0;
00214         errorQuat4(4) = 1.0;
00215         <span class="keywordflow">return</span> errorQuat4;
00216 }
00217 
<a name="l00218"></a><a class="code" href="classDMU.html#DMUa3" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa3">00218</a> <span class="keywordtype">void</span> <a class="code" href="classDMU.html#DMUa3" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa3">DMU::GetAnalogReading</a>( <span class="keywordtype">int</span> _channelID, <a class="code" href="classDAQCard.html" tppabs="http://dsacss.sourceforge.net/classDAQCard.html">DAQCard</a>* _mycard, timeval&amp; _timeStamp, <span class="keywordtype">double</span>&amp; _rateData )
00219 {
00220         <span class="comment">// get current time. NOTE: Fix this time thing, as per Jana's email</span>
00221         gettimeofday(&amp;_timeStamp, NULL);
00222 
00223         _rateData = (<span class="keywordtype">double</span>)<a class="code" href="daqcard_8c.html#a2" tppabs="http://dsacss.sourceforge.net/daqcard_8c.html#a2">ADscan</a>(_mycard-&gt;<a class="code" href="classDAQCard.html#DAQCardr0" tppabs="http://dsacss.sourceforge.net/classDAQCard.html#DAQCardr0">m_cardData</a>, (_channelID-1));
00224         
00225         <span class="comment">// NOTE: this time stamp should also be fixed as per Jana's email.</span>
00226         <a class="code" href="classDMU.html#DMUr9" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr9">m_GetReadingTime</a> = _timeStamp;
00227 }
00228                         
<a name="l00229"></a><a class="code" href="classDMU.html#DMUa2" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa2">00229</a> <span class="keywordtype">void</span> <a class="code" href="classDMU.html#DMUa2" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa2">DMU::GetDigitalReading</a>( <span class="keywordtype">int</span> _channelID, timeval&amp; _timeStamp, <span class="keywordtype">double</span>&amp; _rateData )
00230 {
00231         <span class="comment">// get current time. NOTE: Fix this time thing, as per Jana's email</span>
00232         gettimeofday(&amp;_timeStamp, NULL);
00233 
00234         <span class="comment">// If this is the first call of this function, get new data</span>
00235         <span class="keywordflow">if</span> (<a class="code" href="classDMU.html#DMUr12" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr12">m_firstCall</a>==1) <span class="comment">// TRUE</span>
00236         {
00237                 <a class="code" href="classDMU.html#DMUr13" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr13">m_numread</a> = <a class="code" href="dmu_8c.html#a13" tppabs="http://dsacss.sourceforge.net/dmu_8c.html#a13">dmuReadData</a>(&amp;<a class="code" href="classDMU.html#DMUr5" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr5">m_ptrToReadData</a>, <a class="code" href="classDMU.html#DMUr7" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr7">m_tempBuffSize</a>);
00238         }
00239         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classDMU.html#DMUr12" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr12">m_firstCall</a>==0) <span class="comment">// FALSE</span>
00240         {
00241                 <span class="comment">// not the first call, so compare times</span>
00242                 <a class="code" href="classDMU.html#DMUr10" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr10">m_delta_t</a> = _timeStamp.tv_usec - <a class="code" href="classDMU.html#DMUr9" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr9">m_GetReadingTime</a>.tv_usec;
00243                 <span class="keywordflow">if</span> (<a class="code" href="classDMU.html#DMUr10" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr10">m_delta_t</a> &lt; 0) <a class="code" href="classDMU.html#DMUr10" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr10">m_delta_t</a> += 1000000;
00244                 <span class="keywordflow">if</span> (<a class="code" href="classDMU.html#DMUr10" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr10">m_delta_t</a> &gt; <a class="code" href="classDMU.html#DMUr11" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr11">m_timeToler</a>)
00245                 {
00246                         <span class="comment">// we have exceeded our time tolerance, so get new data</span>
00247                         <a class="code" href="classDMU.html#DMUr13" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr13">m_numread</a> = <a class="code" href="dmu_8c.html#a13" tppabs="http://dsacss.sourceforge.net/dmu_8c.html#a13">dmuReadData</a>(&amp;<a class="code" href="classDMU.html#DMUr5" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr5">m_ptrToReadData</a>, <a class="code" href="classDMU.html#DMUr7" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr7">m_tempBuffSize</a>);
00248                 }
00249         }   
00250         <span class="comment">// Otherwise m_ptrToReadData will still be pointing to the previous</span>
00251         <span class="comment">// data set, and since we are within the time tolerance, we'll use old data.</span>
00252         <span class="comment">// Note that dmuReadData will likely read more than one set of data for </span>
00253         <span class="comment">// each call, so the 0 index in m_ptrToReadData[0] refers to the first set.</span>
00254         <span class="keywordflow">switch</span> (_channelID)
00255         {
00256                 <span class="keywordflow">case</span> 1:
00257                         _rateData = <a class="code" href="classDMU.html#DMUr5" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr5">m_ptrToReadData</a>[0].<a class="code" href="structadat__t.html#adat__to0" tppabs="http://dsacss.sourceforge.net/structadat__t.html#adat__to0">xrate</a>;
00258                         <span class="keywordflow">break</span>;
00259                 <span class="keywordflow">case</span> 2:
00260                         _rateData = m_ptrToReadData[0].yrate;
00261                         <span class="keywordflow">break</span>;
00262                 <span class="keywordflow">case</span> 3:
00263                         _rateData = m_ptrToReadData[0].zrate;
00264                         <span class="keywordflow">break</span>;
00265                 <span class="keywordflow">case</span> 4:
00266                         _rateData = m_ptrToReadData[0].xaccel;
00267                         <span class="keywordflow">break</span>;
00268                 <span class="keywordflow">case</span> 5:
00269                         _rateData = m_ptrToReadData[0].yaccel;
00270                         <span class="keywordflow">break</span>;
00271                 <span class="keywordflow">case</span> 6:
00272                         _rateData = m_ptrToReadData[0].zaccel;
00273                         <span class="keywordflow">break</span>;
00274                 <span class="keywordflow">case</span> 7:
00275                         _rateData = m_ptrToReadData[0].temp;
00276                         <span class="keywordflow">break</span>;
00277                 <span class="keywordflow">default</span>:
00278                         cout &lt;&lt; <span class="stringliteral">" illegal channel value! "</span> &lt;&lt; endl;
00279                         <span class="comment">// NOTE: should be something better here, like error condition</span>
00280         }
00281         <span class="comment">// set the time for this call to the new m_GetReadingTime</span>
00282         <a class="code" href="classDMU.html#DMUr9" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr9">m_GetReadingTime</a> = _timeStamp;
00283         <span class="comment">// NOTE: should add error condition that returns if numread = 0</span>
00284 }
00285 
00286 <a class="code" href="classDMU.html#DMUa1" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUa1">DMU::~DMU</a>()
00287 {
00288         <span class="comment">// Deconstructor</span>
00289         <span class="keyword">delete</span>[] <a class="code" href="classDMU.html#DMUr5" tppabs="http://dsacss.sourceforge.net/classDMU.html#DMUr5">m_ptrToReadData</a>; <span class="comment">/* release the memory used for the temporary read data buffer */</span>
00290 }
00291 
00292 <span class="comment">// Do not change the comments below - they will be added automatically by CVS</span>
00293 <span class="comment">/*****************************************************************************</span>
00294 <span class="comment">*       $Log: realDMU.cpp,v $</span>
00295 <span class="comment">*       Revision 1.7  2004/04/11 19:33:25  shoemaker</span>
00296 <span class="comment">*       Fixed bugs in analog code and cleaned up random messages</span>
00297 <span class="comment">*       </span>
00298 <span class="comment">*       Revision 1.6  2004/04/08 06:07:08  shoemaker</span>
00299 <span class="comment">*       Added analog MoPak calibration routines</span>
00300 <span class="comment">*       </span>
00301 <span class="comment">*       Revision 1.5  2004/03/29 16:43:11  shoemaker</span>
00302 <span class="comment">*       Added code to work with analog DAQ card code</span>
00303 <span class="comment">*       </span>
00304 <span class="comment">*       </span>
00305 <span class="comment">******************************************************************************/</span>
00306         
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jun 15 11:49:54 2004 for DSACSS Operational Code by
<a href="javascript:if(confirm('http://www.doxygen.org/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.doxygen.org/index.html'" tppabs="http://www.doxygen.org/index.html">
<img src="doxygen.png" tppabs="http://dsacss.sourceforge.net/doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
