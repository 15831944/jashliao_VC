<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>vector.cpp Source File</title>
<link href="doxygen.css" tppabs="http://libnurbs.sourceforge.net/docs/doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html" tppabs="http://libnurbs.sourceforge.net/docs/index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html" tppabs="http://libnurbs.sourceforge.net/docs/hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html" tppabs="http://libnurbs.sourceforge.net/docs/annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html" tppabs="http://libnurbs.sourceforge.net/docs/files.html">File List</a> &nbsp; <a class="qindex" href="functions.html" tppabs="http://libnurbs.sourceforge.net/docs/functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>vector.cpp</h1><div class="fragment"><pre>00001 <font class="comment">/*=============================================================================</font>
00002 <font class="comment">        File: vector.cpp</font>
00003 <font class="comment">     Purpose:</font>
00004 <font class="comment">    Revision: $Id: vector.cpp,v 1.2 2002/05/13 21:07:45 philosophil Exp $</font>
00005 <font class="comment">  Created by:    Philippe Lavoie          (3 Oct, 1996)</font>
00006 <font class="comment"> Modified by: </font>
00007 <font class="comment"></font>
00008 <font class="comment"> Copyright notice:</font>
00009 <font class="comment">          Copyright (C) 1996-1998 Philippe Lavoie</font>
00010 <font class="comment"> </font>
00011 <font class="comment">          This library is free software; you can redistribute it and/or</font>
00012 <font class="comment">          modify it under the terms of the GNU Library General Public</font>
00013 <font class="comment">          License as published by the Free Software Foundation; either</font>
00014 <font class="comment">          version 2 of the License, or (at your option) any later version.</font>
00015 <font class="comment"> </font>
00016 <font class="comment">          This library is distributed in the hope that it will be useful,</font>
00017 <font class="comment">          but WITHOUT ANY WARRANTY; without even the implied warranty of</font>
00018 <font class="comment">          MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</font>
00019 <font class="comment">          Library General Public License for more details.</font>
00020 <font class="comment"> </font>
00021 <font class="comment">          You should have received a copy of the GNU Library General Public</font>
00022 <font class="comment">          License along with this library; if not, write to the Free</font>
00023 <font class="comment">          Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</font>
00024 <font class="comment">=============================================================================*/</font>
00025 
00026 <font class="preprocessor">#ifndef VECTOR_SOURCES_</font>
00027 <font class="preprocessor"></font><font class="preprocessor">#define VECTOR_SOURCES_</font>
00028 <font class="preprocessor"></font>
00029 <font class="preprocessor">#include "matrix_global.h"</font>
00030 
00031 <font class="preprocessor">#include "vector.h"</font>
00032 
00035 <font class="keyword">namespace </font>PLib {
00036 
<a name="l00049"></a><a class="code" href="classPLib_1_1Vector.html#a8" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#a8">00049</a> <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt; Vector&lt;T&gt;&amp; Vector&lt;T&gt;::operator=(<font class="keyword">const</font> Vector&lt;T&gt; &amp;b)
00050 {
00051   <font class="keywordflow">if</font>(<font class="keyword">this</font>==&amp;b)
00052     <font class="keywordflow">return</font> *<font class="keyword">this</font> ;
00053 
00054   <font class="keywordflow">if</font> ( <a class="code" href="classPLib_1_1BasicArray.html#a0" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a0">n</a>() != b.n())
00055     {
00056       <a class="code" href="classPLib_1_1BasicArray.html#a10" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a10">resize</a>(b.n()) ;
00057     }
00058 
00059   <a class="code" href="classPLib_1_1BasicArray.html#n3" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n3">sze</a> = b.n() ;
00060   T *pa, *pb ;
00061   pa = <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>-1 ;
00062   pb = b.x-1 ;
00063   <font class="keywordflow">for</font>(<font class="keywordtype">int</font> i=<a class="code" href="classPLib_1_1BasicArray.html#a0" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a0">n</a>();i&gt;0;--i){
00064     *(++pa) = *(++pb) ;
00065   }
00066   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00067 
00068 }
00069 
00079 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00080"></a><a class="code" href="classPLib_1_1Vector.html#a9" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#a9">00080</a> Vector&lt;T&gt;&amp; Vector&lt;T&gt;::operator=(<font class="keyword">const</font> BasicArray&lt;T&gt; &amp;b)
00081 {
00082   <font class="keywordflow">if</font> ( <a class="code" href="classPLib_1_1BasicArray.html#a8" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a8">size</a>() != b.size())
00083     {
00084       <a class="code" href="classPLib_1_1BasicArray.html#a10" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a10">resize</a>(b.size()) ;
00085     }
00086   T *ptr ;
00087   ptr = <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a> - 1 ;
00088   <font class="keywordflow">for</font>(<font class="keywordtype">int</font> i=<a class="code" href="classPLib_1_1BasicArray.html#a8" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a8">size</a>()-1;i&gt;=0;--i)
00089      *(++ptr) = b[i] ;
00090 
00091   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00092 }
00093 
00105 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00106"></a><a class="code" href="classPLib_1_1Vector.html#a12" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#a12">00106</a> T Vector&lt;T&gt;::operator=(<font class="keyword">const</font> T d)
00107 {
00108   <font class="keyword">const</font> <font class="keywordtype">int</font> sz = <a class="code" href="classPLib_1_1BasicArray.html#a8" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a8">size</a>(); 
00109   T *ptr ;
00110   ptr = <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>-1 ;
00111   <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = sz; i &gt; 0; --i)
00112     *(++ptr) = d ;
00113 
00114   <font class="keywordflow">return</font> d;     
00115 }
00116 
00130 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00131"></a><a class="code" href="classPLib_1_1Vector.html#a10" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#a10">00131</a> Vector&lt;T&gt;&amp; Vector&lt;T&gt;::operator+=(<font class="keyword">const</font> Vector&lt;T&gt; &amp;a)
00132 {
00133   <font class="keywordflow">if</font> ( a.size() != <a class="code" href="classPLib_1_1BasicArray.html#a8" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a8">size</a>())
00134     {
00135 <font class="preprocessor">#ifdef USE_EXCEPTION</font>
00136 <font class="preprocessor"></font>      <font class="keywordflow">throw</font> WrongSize(<a class="code" href="classPLib_1_1BasicArray.html#a8" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a8">size</a>(),a.size()) ;
00137 <font class="preprocessor">#else</font>
00138 <font class="preprocessor"></font>      Error error(<font class="stringliteral">"Vector&lt;T&gt;::operator+=(Vector&lt;T&gt;&amp;)"</font>);
00139       error &lt;&lt; <font class="stringliteral">"Vector&lt;T&gt; a += Vector&lt;T&gt; b different sizes, a = "</font> &lt;&lt; <a class="code" href="classPLib_1_1BasicArray.html#a8" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a8">size</a>() &lt;&lt; <font class="stringliteral">", b = "</font> &lt;&lt; a.size() ;
00140       error.fatal() ;
00141 <font class="preprocessor">#endif</font>
00142 <font class="preprocessor"></font>    }
00143   <font class="keyword">const</font> <font class="keywordtype">int</font> sz = <a class="code" href="classPLib_1_1BasicArray.html#a8" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a8">size</a>();
00144   T *ptr,*aptr ;
00145   ptr = <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>-1 ;
00146   aptr = a.x-1 ;
00147   <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = sz; i &gt;0; --i)
00148     *(++ptr) += *(++aptr) ;
00149   
00150   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00151 }
00152 
00165 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00166"></a><a class="code" href="classPLib_1_1Vector.html#a11" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#a11">00166</a> Vector&lt;T&gt;&amp; Vector&lt;T&gt;::operator-=(<font class="keyword">const</font> Vector&lt;T&gt; &amp;a)
00167 {
00168   <font class="keywordflow">if</font> ( a.size() != <a class="code" href="classPLib_1_1BasicArray.html#a8" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a8">size</a>())
00169     {
00170 <font class="preprocessor">#ifdef USE_EXCEPTION</font>
00171 <font class="preprocessor"></font>      <font class="keywordflow">throw</font> WrongSize(<a class="code" href="classPLib_1_1BasicArray.html#a8" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a8">size</a>(),a.size()) ;
00172 <font class="preprocessor">#else</font>
00173 <font class="preprocessor"></font>      Error error(<font class="stringliteral">"Vector&lt;T&gt;::operator-=(Vector&lt;T&gt;&amp;)"</font>);
00174       error &lt;&lt; <font class="stringliteral">"Vector&lt;T&gt; a -= Vector&lt;T&gt; b different sizes, a = "</font> &lt;&lt; <a class="code" href="classPLib_1_1BasicArray.html#a8" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a8">size</a>() &lt;&lt; <font class="stringliteral">", b = "</font> &lt;&lt; a.size() ;
00175       error.fatal() ;
00176 <font class="preprocessor">#endif</font>
00177 <font class="preprocessor"></font>    }
00178   
00179   <font class="keyword">const</font> <font class="keywordtype">int</font> sz = <a class="code" href="classPLib_1_1BasicArray.html#a8" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a8">size</a>(); 
00180   T *ptr,*aptr ;
00181   ptr = <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>-1 ;
00182   aptr = a.x-1 ;
00183   <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = sz; i &gt; 0; --i)
00184     *(++ptr) -= *(++aptr) ;
00185   
00186   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00187 }
00188 
00201 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00202"></a><a class="code" href="classPLib_1_1Vector.html#l0" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#l0">00202</a> Vector&lt;T&gt; operator+(<font class="keyword">const</font> Vector&lt;T&gt;&amp; a, <font class="keyword">const</font> Vector&lt;T&gt; &amp;b)     
00203 {
00204   Vector&lt;T&gt; sum(a);
00205   sum += b ;
00206   
00207   <font class="keywordflow">return</font> sum;
00208 }
00209 
00223 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00224"></a><a class="code" href="classPLib_1_1Vector.html#l1" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#l1">00224</a> Vector&lt;T&gt; operator-(<font class="keyword">const</font> Vector&lt;T&gt;&amp; a, <font class="keyword">const</font> Vector&lt;T&gt; &amp;b)
00225 {
00226   Vector&lt;T&gt; diff(a);
00227   diff -= b ;
00228   <font class="keywordflow">return</font> diff;
00229 }
00230 
00244 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00245"></a><a class="code" href="classPLib_1_1Vector.html#l2" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#l2">00245</a> T operator*(<font class="keyword">const</font> Vector&lt;T&gt; &amp;a,<font class="keyword">const</font> Vector&lt;T&gt; &amp;b)
00246 {
00247   <font class="keywordflow">if</font> ( a.size() != b.size() )
00248     {
00249 <font class="preprocessor">#ifdef USE_EXCEPTION</font>
00250 <font class="preprocessor"></font>      <font class="keywordflow">throw</font> WrongSize(a.size(),b.size()) ;
00251 <font class="preprocessor">#else</font>
00252 <font class="preprocessor"></font>      Error error(<font class="stringliteral">"Vector&lt;T&gt;::operator=(Vector&lt;T&gt;&amp;)"</font>);
00253       error &lt;&lt; <font class="stringliteral">"Vector&lt;T&gt; a = Vector&lt;T&gt; b different sizes, a = "</font> &lt;&lt; a.size() &lt;&lt; <font class="stringliteral">", b = "</font> &lt;&lt; b.size() ;
00254       error.fatal() ;
00255 <font class="preprocessor">#endif</font>
00256 <font class="preprocessor"></font>    }
00257 
00258   <font class="keywordtype">int</font> i, sz = a.size();
00259   T prod, zero = (T)0;
00260   T *aptr,*bptr ;
00261   aptr = a.x-1 ;
00262   bptr = b.x-1 ;
00263   prod = zero ;
00264   <font class="keywordflow">for</font> (i = sz ; i &gt; 0; --i)
00265     prod += (*(++aptr)) * (*(++bptr)) ;
00266   
00267   <font class="keywordflow">return</font> prod;
00268 }
00269 
00283 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00284"></a><a class="code" href="classPLib_1_1Vector.html#l3" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#l3">00284</a> Vector&lt;T&gt;  operator*(<font class="keyword">const</font> Vector&lt;T&gt;&amp; v, <font class="keyword">const</font> <font class="keywordtype">double</font> d)
00285 {
00286   <font class="keywordtype">int</font> i, sz = v.size();
00287   Vector&lt;T&gt; b(v.size());
00288   
00289   T *aptr,*bptr ;
00290   aptr = v.x-1 ;
00291   bptr = b.x-1 ;
00292   <font class="keywordflow">for</font> (i = sz; i &gt; 0; --i){
00293     *(++bptr) = (T)(d * (*(++aptr)) ) ;
00294   }
00295   
00296   <font class="keywordflow">return</font> b;
00297 
00298 }
00299 
00314 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00315"></a><a class="code" href="classPLib_1_1Vector.html#l4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#l4">00315</a> Vector&lt;T&gt;  operator*(<font class="keyword">const</font> Vector&lt;T&gt;&amp; v, <font class="keyword">const</font> Complex d)
00316 {
00317   <font class="keywordtype">int</font> i, sz = v.size();
00318   Vector&lt;T&gt; b = v;
00319   
00320   T *bptr ;
00321   bptr = b.x-1 ;
00322   <font class="keywordflow">for</font> (i = sz; i &gt; 0; --i){
00323     ++bptr ;
00324     (*bptr) = (T)(real(d)*(*bptr));
00325   }
00326   
00327   <font class="keywordflow">return</font> b;
00328 
00329 }
00330 
00331 
00343 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00344"></a><a class="code" href="classPLib_1_1Vector.html#l7" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#l7">00344</a> <font class="keywordtype">int</font> operator==(<font class="keyword">const</font> Vector&lt;T&gt; &amp;a,<font class="keyword">const</font> Vector&lt;T&gt; &amp;b)
00345 {
00346   <font class="keywordflow">if</font> ( a.size() != b.size() )
00347     {
00348       <font class="keywordflow">return</font> 0 ;
00349     }
00350 
00351   <font class="keywordtype">int</font> i, sz = a.size();
00352   <font class="keywordtype">int</font> l = 1;
00353   
00354   T *aptr,*bptr ;
00355   aptr = a.x-1 ;
00356   bptr = b.x-1 ;
00357 
00358   <font class="keywordflow">for</font> (i = sz; i &gt; 0; --i)
00359     l = l &amp;&amp; ( *(++aptr) == *(++bptr) );
00360   
00361   <font class="keywordflow">return</font> l;
00362 }
00363 
00379 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt; 
<a name="l00380"></a><a class="code" href="classPLib_1_1Vector.html#a13" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#a13">00380</a> <font class="keywordtype">void</font> Vector&lt;T&gt;::as(<font class="keywordtype">int</font> i, <font class="keyword">const</font> Vector&lt;T&gt; &amp;b)
00381 {
00382   <font class="keywordflow">if</font> ( (i + b.rows()) &gt; <a class="code" href="classPLib_1_1Vector.html#a0" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#a0">rows</a>() )
00383     {
00384 <font class="preprocessor">#ifdef USE_EXCEPTION</font>
00385 <font class="preprocessor"></font>      <font class="keywordflow">throw</font> MatrixErr() ;
00386 <font class="preprocessor">#else</font>
00387 <font class="preprocessor"></font>      Error error(<font class="stringliteral">"Vector&lt;T&gt;::as(int,Vector&lt;T&gt;)"</font>);
00388       error &lt;&lt; <font class="stringliteral">"Vector is too long to fit at i= "</font> &lt;&lt; i &lt;&lt; endl ;
00389       error.fatal() ;
00390 <font class="preprocessor">#endif</font>
00391 <font class="preprocessor"></font>    }
00392 
00393   T *aptr,*bptr ;
00394   aptr = &amp;<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[i]-1 ;
00395   bptr = b.x-1 ;
00396   <font class="keywordflow">for</font> ( <font class="keywordtype">int</font> j = b.rows(); j &gt; 0; --j)
00397       *(++aptr) = *(++bptr) ;
00398 }
00399 
00416 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00417"></a><a class="code" href="classPLib_1_1Vector.html#a14" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#a14">00417</a> Vector&lt;T&gt; Vector&lt;T&gt;::get(<font class="keywordtype">int</font> i, <font class="keywordtype">int</font> l)
00418 {
00419   <font class="keywordflow">if</font> ( (i + l) &gt; <a class="code" href="classPLib_1_1Vector.html#a0" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#a0">rows</a>() )
00420     {
00421 <font class="preprocessor">#ifdef USE_EXCEPTION</font>
00422 <font class="preprocessor"></font>      <font class="keywordflow">throw</font> MatrixErr() ;
00423 <font class="preprocessor">#else</font>
00424 <font class="preprocessor"></font>      Error error(<font class="stringliteral">"Vector&lt;T&gt;::get(int,Vector&lt;T&gt;)"</font>);
00425       error &lt;&lt; <font class="stringliteral">"Vector is too long to extract from  i= "</font> &lt;&lt; i &lt;&lt; <font class="stringliteral">"from l="</font> &lt;&lt; l &lt;&lt; endl ;
00426       error.fatal() ;
00427 <font class="preprocessor">#endif</font>
00428 <font class="preprocessor"></font>    }
00429 
00430   Vector&lt;T&gt; subvec(l) ;
00431   T *aptr, *bptr ;
00432   aptr = &amp;<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[i] - 1 ;
00433   bptr = subvec.x -1 ;
00434   <font class="keywordflow">for</font> ( <font class="keywordtype">int</font> j = l; j &gt; 0; --j)
00435     *(++bptr) = *(++aptr) ;
00436   <font class="keywordflow">return</font> subvec ;
00437 }
00438 
00450 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00451"></a><a class="code" href="classPLib_1_1Vector.html#a15" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#a15">00451</a> <font class="keywordtype">int</font> Vector&lt;T&gt;::minIndex()<font class="keyword"> const </font>{
00452   T min = <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[0] ;
00453   <font class="keywordtype">int</font> index = 0 ;
00454 
00455   <font class="keywordflow">for</font>(<font class="keywordtype">int</font> i=1;i&lt;<a class="code" href="classPLib_1_1BasicArray.html#a0" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#a0">n</a>();i++){
00456     <font class="keywordflow">if</font>(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[i]&lt;=min){
00457       min = <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[i] ;
00458       index = i ;
00459     }
00460   }
00461   <font class="keywordflow">return</font> index ;
00462 }
00463 
00464 
00479 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00480"></a><a class="code" href="classPLib_1_1Vector.html#a17" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#a17">00480</a> <font class="keywordtype">void</font> Vector&lt;T&gt;::qSortStd(){
00481 <font class="preprocessor">#ifdef USE_EXCEPTION</font>
00482 <font class="preprocessor"></font>  <font class="keywordflow">throw</font> MatrixErr() ;
00483 <font class="preprocessor">#else</font>
00484 <font class="preprocessor"></font>  Error error(<font class="stringliteral">"Vector&lt;T&gt;::qSort()"</font>);
00485   error &lt;&lt; <font class="stringliteral">"qSortStd is not defined for that type.\nPlease defined it in your .C file!"</font>;
00486   error.fatal() ;
00487 <font class="preprocessor">#endif</font>
00488 <font class="preprocessor"></font>}
00489 
00490 
00491 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
00492 <font class="keyword">inline</font> <font class="keywordtype">void</font> swap(T&amp; a, T&amp; b){
00493   T temp = a ;
00494   a = b ;
00495   b = temp ;
00496 }
00497 
00517 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00518"></a><a class="code" href="classPLib_1_1Vector.html#a18" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#a18">00518</a> <font class="keywordtype">void</font> Vector&lt;T&gt;::qSort(<font class="keywordtype">int</font> M){
00519   <font class="keyword">const</font> <font class="keywordtype">int</font> Nstack=50 ; 
00520   <font class="keywordtype">int</font> i,ir,j,k,l ;
00521   Vector&lt;int&gt; istack(Nstack) ;
00522   <font class="keywordtype">int</font> jstack=0;
00523   T a ;
00524   T *v1,*v2  ;
00525 
00526   ir = <a class="code" href="classPLib_1_1BasicArray.html#n3" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n3">sze</a>-1 ;
00527   l = 0 ;
00528   
00529   <font class="keywordflow">while</font>(1){
00530     <font class="keywordflow">if</font>(ir-l&lt;M){ <font class="comment">// perform an insertion sort when the array is small enough</font>
00531       v1 = &amp;<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[l] ;
00532       <font class="keywordflow">for</font>(j=l+1;j&lt;=ir;++j){
00533         a = *(++v1) ;
00534         v2 = v1 ;
00535         --v2 ;
00536         <font class="keywordflow">for</font>(i=j-1;i&gt;=0;--i){
00537           <font class="keywordflow">if</font>(*v2 &lt;= a) <font class="keywordflow">break</font> ;
00538           *(v2+1) = *v2 ;
00539           --v2 ;
00540         }
00541         ++v2 ;
00542         *(v2) = a ;
00543       }
00544       <font class="keywordflow">if</font>(jstack==0) <font class="keywordflow">break</font> ;
00545       ir=istack[--jstack] ;
00546       l=istack[--jstack] ;
00547     }
00548     <font class="keywordflow">else</font>{
00549       k=(l+ir) &gt;&gt; 1 ;
00550       swap(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[k],<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[l+1]) ;
00551       <font class="keywordflow">if</font>(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[l+1] &gt; <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[ir]){
00552         swap(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[l+1],<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[ir]) ;
00553       }
00554       <font class="keywordflow">if</font>(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[l]&gt; <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[ir]){
00555         swap(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[l],<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[ir]) ;
00556       }
00557       <font class="keywordflow">if</font>(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[l+1] &gt; <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[l]){
00558         swap(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[l+1],<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[l]) ;
00559       }
00560       i=l+1 ;
00561       j=ir ;
00562       a=<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[l] ;
00563       v1 = &amp;<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[i] ;
00564       v2 = &amp;<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[j] ;
00565       <font class="keywordflow">while</font>(1){
00566         <font class="keywordflow">while</font>(*v1 &lt; a) { ++i ; ++v1 ; }
00567         <font class="keywordflow">while</font>(*v2 &gt; a) { --j ; --v2 ; }
00568         <font class="keywordflow">if</font>(j&lt;i) <font class="keywordflow">break</font> ;
00569         <font class="keywordflow">if</font>(*v1 == *v2)  <font class="comment">// both are equal to a...</font>
00570           <font class="keywordflow">break</font> ;
00571         swap(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[i],<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[j]) ;
00572       }
00573       <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[l] = <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[j] ;
00574       <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[j] = a ;
00575       jstack += 2 ;
00576       <font class="keywordflow">if</font>(jstack&gt;=Nstack){
00577         istack.resize(istack.n()+Nstack) ; <font class="comment">// increase the vector size</font>
00578       }
00579       <font class="keywordflow">if</font>(ir-i+1 &gt;= j-l){
00580         istack[jstack-1]=ir ;
00581         istack[jstack-2] = i ;
00582         ir=j-1 ;
00583       }
00584       <font class="keywordflow">else</font>{
00585         istack[jstack-1] = j-1 ;
00586         istack[jstack-2] = l ;
00587         l=i ;
00588       }
00589     }
00590   }
00591 }
00592 
00593 
00613 <font class="keyword">template</font> &lt;<font class="keyword">class</font> T&gt;
<a name="l00614"></a><a class="code" href="classPLib_1_1Vector.html#a19" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1Vector.html#a19">00614</a> <font class="keywordtype">void</font> Vector&lt;T&gt;::sortIndex(Vector&lt;int&gt;&amp; index, <font class="keywordtype">int</font> M)<font class="keyword"> const</font>{
00615   <font class="keyword">const</font> <font class="keywordtype">int</font> Nstack=50 ; 
00616   <font class="keywordtype">int</font> i,ir,j,k,l,indext ;
00617   Vector&lt;int&gt; istack(Nstack) ;
00618   <font class="keywordtype">int</font> jstack=0;
00619   T a ;
00620 
00621   ir = <a class="code" href="classPLib_1_1BasicArray.html#n3" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n3">sze</a>-1 ;
00622   l = 0 ;
00623   
00624   index.resize(<a class="code" href="classPLib_1_1BasicArray.html#n3" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n3">sze</a>) ;
00625   <font class="keywordflow">for</font>(i=0;i&lt;index.n();++i)
00626     index[i] = i ;
00627 
00628   <font class="keywordflow">while</font>(1){
00629     <font class="keywordflow">if</font>(ir-l&lt;M){ <font class="comment">// perform an insertion sort when the array is small enough</font>
00630       <font class="keywordflow">for</font>(j=l+1;j&lt;=ir;++j){
00631         indext = index[j] ;
00632         a = <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[indext] ;
00633         <font class="keywordflow">for</font>(i=j-1;i&gt;=0;--i){
00634           <font class="keywordflow">if</font>(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[index[i]] &lt;= a) <font class="keywordflow">break</font> ;
00635           index[i+1] = index[i] ;
00636         }
00637         index[i+1] = indext ;
00638       }
00639       <font class="keywordflow">if</font>(jstack==0) <font class="keywordflow">break</font> ;
00640       ir=istack[--jstack] ;
00641       l=istack[--jstack] ;
00642     }
00643     <font class="keywordflow">else</font>{
00644       k=(l+ir) &gt;&gt; 1 ;
00645       swap(index[k],index[l+1]) ;
00646       <font class="keywordflow">if</font>(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[index[l+1]] &gt; <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[index[ir]]){
00647         swap(index[l+1],index[ir]) ;
00648       }
00649       <font class="keywordflow">if</font>(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[index[l]]&gt; <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[index[ir]]){
00650         swap(index[l],index[ir]) ;
00651       }
00652       <font class="keywordflow">if</font>(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[index[l+1]] &gt; <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[index[l]]){
00653         swap(index[l+1],index[l]) ;
00654       }
00655       i=l+1 ;
00656       j=ir ;
00657       indext = index[l] ;
00658       a=<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[indext] ;
00659       <font class="keywordflow">while</font>(1){
00660         <font class="keywordflow">while</font>(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[index[i]] &lt; a) { ++i ; }
00661         <font class="keywordflow">while</font>(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[index[j]] &gt; a) { --j ; }
00662         <font class="keywordflow">if</font>(j&lt;i) <font class="keywordflow">break</font> ;
00663         <font class="keywordflow">if</font>(<a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[index[i]] == <a class="code" href="classPLib_1_1BasicArray.html#n4" tppabs="http://libnurbs.sourceforge.net/docs/classPLib_1_1BasicArray.html#n4">x</a>[index[j]])
00664           <font class="keywordflow">break</font> ;
00665         swap(index[i],index[j]) ;
00666       }
00667       index[l] = index[j] ;
00668       index[j] = indext ;
00669       jstack += 2 ;
00670       <font class="keywordflow">if</font>(jstack&gt;=Nstack){
00671         istack.resize(istack.n()+Nstack) ; <font class="comment">// increase the vector size</font>
00672       }
00673       <font class="keywordflow">if</font>(ir-i+1 &gt;= j-l){
00674         istack[jstack-1]=ir ;
00675         istack[jstack-2] = i ;
00676         ir=j-1 ;
00677       }
00678       <font class="keywordflow">else</font>{
00679         istack[jstack-1] = j-1 ;
00680         istack[jstack-2] = l ;
00681         l=i ;
00682       }
00683     }
00684   }
00685 }
00686 
00687 
00688 }
00689 
00690 
00691 <font class="preprocessor">#endif</font>
</pre></div><hr><address><small>Generated on Tue Jun 24 13:26:59 2003 for NURBS++ by
<a href="javascript:if(confirm('http://www.doxygen.org/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.doxygen.org/index.html'" tppabs="http://www.doxygen.org/index.html">
<img src="doxygen.gif" tppabs="http://libnurbs.sourceforge.net/docs/doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
